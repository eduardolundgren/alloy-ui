AUI.add("aui-datatable-highlight",function(r){var b=r.Lang,m=b.isArray,n=b.isString,l=b.isBoolean,f="active",t="activeBorderWidth",i="activeCell",k="activeCellChange",u="border",z="boundingBox",h="cell",x="cells",d="children",B="highlight",q="highlightRange",y="host",j="overlay",e="overlayActiveNode",w="overlayNode",a="rangeBorderWidth",s="region",v="rows",g="selectionChange",o="type",C=" ",p=function(F){var D=this,E=0,A;if(n(F)){F=b.trim(F).replace(/\s+/g," ").split(C);}else{if(!m(F)){F=r.Array(F);}}for(A=4-F.length;E<A;E++){F.push(F[E]);}return r.Array.map(F,parseFloat);};var c=r.Base.create("datatable-highlight",r.Plugin.Base,[],{CLASS_NAMES:null,TPL_FRAME:'<div class="{overlay}">'+'<div class="{border}"></div>'+'<div class="{border}"></div>'+'<div class="{border}"></div>'+'<div class="{border}"></div>'+"</div>",_nodes:null,initializer:function(){var A=this,D=A.get(y);A.CLASS_NAMES={activeCell:D.getClassName(f,h),border:D.getClassName(B,u),highlight:D.getClassName(B),overlay:D.getClassName(B,j),overlayActive:D.getClassName(B,j,f)};A.afterHostEvent(k,A._afterActiveCellChange);A.afterHostEvent(g,A._afterSelectionChange);},clear:function(){var A=this,E=A.get(y),D=E.get(i);if(D){D.removeClass(A.CLASS_NAMES.activeCell);}A._clearBorders();A._clearHighlights();},getActiveCellRegion:function(){var A=this,E=A.get(y),D=E.get(i),F=null;if(D){F=D.get(s);}return F;},getSelectionRegion:function(){var A=this,F=A._nodes,E=F[0].get(s),D=F[F.length-1].get(s);return{0:E.top,1:E.left,bottom:D.bottom,height:D.bottom-E.top,left:E.left,right:D.right,top:E.top,width:D.right-E.left};},_afterActiveCellChange:function(F){var A=this,E=A.get(t),D=A.get(e),G=A.CLASS_NAMES;A.clear();if(F.prevVal){F.prevVal.removeClass(G.activeCell);}if(F.newVal){A._alignBorder(D,A.getActiveCellRegion(),E);F.newVal.addClass(G.activeCell);}},_afterSelectionChange:function(F){var A=this,D,H=A.get(q),E=A.get(w),G=A.get(a);A._clearHighlights();D=A._collectNodes(F.newVal);if(H&&(D.length>1)){A._alignBorder(E,A.getSelectionRegion(),G);r.Array.each(D,function(I){I.addClass(A.CLASS_NAMES.highlight);});}},_alignBorder:function(M,I,D){var J=this,K=J.get(y),F=K.get(z);F.appendChild(M);if(I){var G=M.get(d),L=G.item(0),A=G.item(1),H=G.item(2),E=G.item(3);M.setXY([I.left,I.top]);L.sizeTo(I.width,D[0]);E.sizeTo(D[3],I.height-D[2]);H.sizeTo(I.width,D[2]);A.sizeTo(D[1],I.height-D[2]);L.setXY([I.left,I.top]);E.setXY([I.left,I.top]);H.setXY([I.left,I.bottom-D[2]]);A.setXY([I.right-D[1],I.top]);}},_collectNodes:function(E){var A=this,D=A.get(o);if(!E){return null;}return(A._nodes=E[D]);},_clearBorders:function(){var A=this;A.get(w).remove();A.get(e).remove();},_clearHighlights:function(){var A=this;r.Array.each(A._nodes,function(D){D.removeClass(A.CLASS_NAMES.highlight);});},_validateType:function(A){return(A===x||A===v||A===null);}},{NS:B,NAME:"datatable-highlight",ATTRS:{activeBorderWidth:{setter:p,value:2},overlayActiveNode:{setter:function(E){var A=this,D=A.CLASS_NAMES;if(!E){E=r.Node.create(b.sub(A.TPL_FRAME,D));E.addClass(D.overlayActive);}return E;},value:null},overlayNode:{setter:function(D){var A=this;if(!D){D=r.Node.create(b.sub(A.TPL_FRAME,A.CLASS_NAMES));}return D;},value:null},highlightRange:{validator:l,value:true},rangeBorderWidth:{setter:p,value:1},type:{validator:"_validateType",value:x}}});r.namespace("Plugin").DataTableHighlight=c;},"@VERSION@",{skinnable:true,requires:["aui-datatable-selection"]});