AUI.add("aui-ace-autocomplete-base",function(c){var g=c.Lang,b=c.Array,h=c.Do,m=c.DOM,a="insertText",d="exec",k="host",f="processor",j=-1,i=0,l="ace-autocomplete-base";var e=function(){};e.prototype={initializer:function(){var n=this;n._editorCommands=[];c.after(this._bindUIACBase,this,"renderUI");var o=n.get(f);if(o&&!o.get(k)){o.set(k,n);}},_addSuggestion:function(p){var n=this;var o=n._getEditor();var q=n.get(f).getSuggestion(n._matchParams.match,p);o.insert(q);o.focus();n.fire("addSuggestion",q);return new h.Halt(null);},_bindUIACBase:function(){var n=this;n.publish("cursorChange",{defaultFn:n._defaultCursorChangeFn});var o=n._getEditor();o.on("change",c.bind(n._onEditorChange,n));o.commands.addCommand({name:"showAutoComplete",bindKey:c.merge(n.get("showListKey"),{sender:"editor|cli"}),exec:function(r,q,s){var p=o.getCursorPosition();n._processAutoComplete(p.row,p.column);}});o.getSelection().on("changeCursor",c.bind(n._onEditorChangeCursor,n));n.on("destroy",n._destroyUIACBase,n);},_defaultCursorChangeFn:function(n){var t=this;var q=t._getEditor();var o=q.getCursorPosition();var u=o.row;var p=o.column;var r=t._matchParams;if(u!==r.row||p<r.match.start){t.fire("cursorOut");}else{var v=q.getSession().getLine(u);var s=v.substring(r.match.start,p);if(!t.get(f).getMatch(s)){t.fire("match");}}},_destroyUIACBase:function(){var n=this;n._removeAutoCompleteCommands();},_getEditor:function(){var n=this;return n.get("host").getEditor();},_handleEnter:function(p){var n=this;if(p==="\n"||p==="\t"){var o=n._getSelectedEntry();return n._addSuggestion(o);}},_onEditorChange:function(s){var n=this;var t=s.data;var u=t.action;if(u===a||u==="removeText"){var q=t.range;var r=q.start.column;var p=q.end.row;var o=q.start.row;if(u===a&&o===p){n._processAutoComplete(o,r+1);}n.fire(u,{column:r,dataRange:q,endRow:p,startRow:o});}},_onEditorChangeCursor:function(o){var n=this;n.fire("cursorChange",n._getEditor().getCursorPosition());},_onResultsError:function(o){var n=this;n.fire("resultsError",o);},_onResultsSuccess:function(o){var n=this;n.set("results",o);},_overwriteCommands:function(){var o=this;var p=o._getEditor();var n=p.commands.commands;o._editorCommands.push(h.before(o._handleEnter,p,"onTextInput",this),h.before(o._handleKey,n["golinedown"],d,this,40),h.before(o._handleKey,n["golineup"],d,this,38),h.before(o._handleKey,n["gotoend"],d,this,35),h.before(o._handleKey,n["gotolineend"],d,this,35),h.before(o._handleKey,n["gotolinestart"],d,this,36),h.before(o._handleKey,n["gotopagedown"],d,this,34),h.before(o._handleKey,n["gotopageup"],d,this,33),h.before(o._handleKey,n["gotostart"],d,this,36));},_processAutoComplete:function(u,p){var t=this;var o=p;var r=t._getEditor();var v=r.getSession().getLine(u);v=v.substring(0,p);var n=t.get(f);var q=n.getMatch(v);var s;if(g.isObject(q)){s=r.renderer.textToScreenCoordinates(u,p);s.pageX+=m.docScrollX();s.pageY+=m.docScrollY();t._matchParams={column:p,match:q,row:u};n.getResults(q,c.bind(t._onResultsSuccess,t),c.bind(t._onResultsError,t));}t.fire("match",{column:p,coords:s,line:v,match:q,row:u});},_removeAutoCompleteCommands:function(){var n=this;b.invoke(n._editorCommands,"detach");n._editorCommands.length=0;}};e.NAME=l;e.NS=l;e.ATTRS={processor:{validator:function(n){return g.isObject(n)||g.isFunction(n);}},showListKey:{validator:g.isObject,value:{mac:"Alt-Space",win:"Ctrl-Space"}}};c.AceEditor.AutoCompleteBase=e;},"@VERSION@",{requires:["aui-ace-editor"]});AUI.add("aui-ace-autocomplete-list",function(k){var Q=k.Lang,o=k.Array,x=k.Do,e=k.getClassName,M="data-index",y="ace-autocomplete-list",b="container",q=".",c="empty",i="",z="entry",t="highlighted",E="list",p="loading",C="offsetHeight",B="previous",u="region",N="results",v="selected",a=" ",P="visible",j="ace-autocomplete",g=e(j,z),J=e(j,z,b),s=e(j,z,b,t),n=e(j,z,c),L=e(j,z,p),D=e(j,z,p),d=e(j,N),I=q+J,l=I+q+v,O=l+a+q+g,m=40,h=35,K=34,r=33,f=36,G=38,F=5,H=20;var w=k.Component.create({NAME:y,NS:y,ATTRS:{emptyMessage:{validator:Q.isString,value:"No suggestions"},host:{validator:Q.isObject},listNode:{value:null},loadingMessage:{validator:Q.isString,value:"Loading"},results:{validator:Q.isArray},selectedEntry:{getter:"_getSelectedEntry"}},AUGMENTS:[k.AceEditor.AutoCompleteBase,k.WidgetAutohide],CSS_PREFIX:j,EXTENDS:k.OverlayBase,HTML_PARSER:{listNode:q+d},prototype:{bindUI:function(){var A=this;A.on("addSuggestion",A.hide,A);A.on("cursorChange",A._onCursorChange,A);A.on("cursorOut",A.hide,A);A.on("insertText",A._onInsertText,A);A.on("match",A._onMatch,A);A.on("removeText",A._onRemoveText,A);A.on("resultsChange",A._onResultsChange,A);A.on("resultsError",A._setEmptyResults,A);A.on("showLoadingMessage",A._onShowLoadingMessage,A);A.on("visibleChange",A._onVisibleChange,A);},renderUI:function(){var A=this;var R=A.get("listNode");if(!R){R=A._createListNode();}R.delegate("click",A._handleResultListClick,I,A);R.delegate("mouseenter",A._onMouseEnter,I,A);R.delegate("mouseleave",A._onMouseLeave,I);A._autoCompleteResultsList=R;},_createListNode:function(){var A=this;var R=k.Node.create(A.TPL_LIST);A.get("contentBox").append(R);return R;},_getEntriesPerPage:function(){var A=this;var S=A._entriesPerPage;if(!S){var R=A._autoCompleteResultsList;var T=R.one(I).get(C);var U=R.get(C);S=Math.floor(U/T);A._entriesPerPage=S;}return S;},_getSelectedEntry:function(){var A=this;var R;var S=A._autoCompleteResultsList.one(O);if(S){R=S.text();}return R;},_handleArrows:function(W){var A=this;var V;if(W===G){V=B;}else{if(W===m){V="next";}}if(V){var T=A._autoCompleteResultsList;var S=T.one(l);if(S){var U=S[V](I);if(U){S.removeClass(v);U.addClass(v);var X=T.get(u);var R=U.get(u);if(V===B){if(R.top<X.top){U.scrollIntoView(true);}else{if(R.top>X.bottom){U.scrollIntoView();}}}else{if(R.top+R.height>X.bottom){U.scrollIntoView();}else{if(R.top+R.height<X.top){U.scrollIntoView(true);}}}}}return new x.Halt(null);}},_handleKey:function(S,U,T){var R=this;var A;if(R.get(P)){if(T===G||T===m){A=R._handleArrows(T);}else{if(T===r||T===K){A=R._handlePageUpDown(T);
}else{if(T===h||T===f){A=R._handleStartEnd(T);}}}}return A;},_handlePageUpDown:function(Y){var W=this;var T=W._autoCompleteResultsList;var X=W._getEntriesPerPage();var V=T.one(l);var A=Q.toInt(V.attr(M));var U;var Z=i;var R=false;if(Y===r){U=A-X;R=true;}else{if(Y===K){U=A+X;Z=":last-child";}}var S=T.one(I+"["+M+'="'+U+'"]');if(!S){S=T.one(I+Z);}if(V!==S){V.removeClass(v);S.addClass(v);S.scrollIntoView(R);}return new x.Halt(null);},_handleResultListClick:function(T){var A=this;var U=T.currentTarget;var R=A._autoCompleteResultsList.one(l);if(U!==R){R.removeClass(v);U.addClass(v);}var S=U.text();A._addSuggestion(S);A.fire("entrySelected",{content:S});},_handleStartEnd:function(V){var A=this;var T;var U=false;var S=A._autoCompleteResultsList;if(V===h){T=S.one(I+":last-child");}else{if(V===f){T=S.one(I);U=true;}}var R=S.one(l);if(T!==R){R.removeClass(v);T.addClass(v);T.scrollIntoView(U);}return new x.Halt(null);},_onCursorChange:function(R){var A=this;if(!A.get(P)){R.preventDefault();}},_onInsertText:function(R){var A=this;if(R.startRow!==R.endRow&&A.get(P)){A.hide();}},_onMatch:function(R){var A=this;if(R.match){var S=R.coords;A.set("xy",[S.pageX+F,S.pageY+H]);}else{if(A.get(P)){A.hide();}}},_onMouseEnter:function(A){A.currentTarget.addClass(s);},_onMouseLeave:function(A){A.currentTarget.removeClass(s);},_onRemoveText:function(R){var A=this;if(A.get(P)){A.hide();}},_onResultsChange:function(V){var A=this;var R=A._autoCompleteResultsList;R.empty();var T=V.newVal;var U=A.TPL_ENTRY;o.each(T,function(X,W){R.appendChild(Q.sub(U,{index:W,value:X}));});var S=R.one(I);if(S){S.addClass(v);if(!A.get(P)){A.show();}}else{if(A.get(P)){A.hide();}}},_onShowLoadingMessage:function(S){var A=this;var R=A._autoCompleteResultsList;R.empty();R.appendChild(Q.sub(A.TPL_LOADING,{label:A.get("loadingMessage")}));if(!A.get(P)){A.show();}},_onVisibleChange:function(R){var A=this;if(R.newVal){A._overwriteCommands();}else{A._removeAutoCompleteCommands();}},_setEmptyResults:function(){var A=this;A.set("results",[]);},TPL_ENTRY:'<li class="'+J+'" data-index="{index}">'+'<span class="'+g+'">{value}</span>'+"</li>",TPL_LIST:'<ul class="'+d+'"/>',TPL_LOADING:'<li class="'+J+'">'+'<span class="aui-icon-loading '+L+'">{label}</span>'+"</li>",TPL_RESULTS_EMPTY:'<li class="'+J+'">'+'<span class="'+n+'">{label}</span>'+"</li>"}});k.AceEditor.AutoCompleteList=w;k.AceEditor.AutoComplete=w;},"@VERSION@",{requires:["aui-overlay-base","widget-autohide","aui-ace-autocomplete-base"],skinnable:true});AUI.add("aui-ace-autocomplete-plugin",function(a){var b=a.Plugin;function c(d){if(!d.render&&d.render!==false){d.render=true;}c.superclass.constructor.apply(this,arguments);}a.extend(c,a.AceEditor.AutoCompleteList,{},{CSS_PREFIX:"aui-ace-autocomplete",NAME:"aui-ace-autocomplete-plugin",NS:"aui-ace-autocomplete-plugin"});b.AceAutoComplete=c;b.AceAutoCompleteList=c;},"@VERSION@",{requires:["plugin","aui-ace-autocomplete-list"]});AUI.add("aui-ace-autocomplete-freemarker",function(k){var d=k.Lang,q=k.Array,o=k.Object,h=["flush","recover","fallback","local","break","lt","case","global","if","compress","escape","assign","elseif","noescape","setting","list","else","switch","include","recurse","rt","ftl","macro","stop","nt","visit","attempt","nested","import","default","return","t","function"],a=0,e=1,r=/<#[\w.]*>?$/,j=/\$\{[\w., ()"]*\}?$/,b=-1,p=0,c="all",m=".",l="",f="responseData",i="variables",g="aui-ace-autocomplete-freemarker";var n=k.Component.create({NAME:g,NS:g,ATTRS:{host:{validator:d.isObject},variables:{validator:d.isObject}},EXTENDS:k.Base,prototype:{initializer:function(t){var s=this;s._tstree=new k.TernarySearchTree();},getMatch:function(v){var t=this;var u;var s;if((s=v.lastIndexOf("<"))>=0){v=v.substring(s);if(r.test(v)){u={content:v.substring(2),start:s,type:a};}}else{if((s=v.lastIndexOf("$"))>=0){v=v.substring(s);if(j.test(v)){u={content:v.substring(2),start:s,type:e};}}}return u;},getResults:function(t,z,y){var A=this;var u=A._tstree;var x=t.type;if(x===a){var w=h;var v=t.content;if(v.length){if(A._lastTSTLoad!==a){A._addDirectives();}w=u.prefixSearch(v);}z(w);}else{if(x===e){var s=A._getVariableMatches(t.content);z(s);}}},getSuggestion:function(v,w){var t=this;var s=w||l;if(w){var x=v.type;if(x===a){if(v.content&&w.indexOf(v.content)===0){s=w.substring(v.content.length);}}else{if(x===e){var y=v.content.split(m);var u=y[y.length-1];if(u&&w.indexOf(u)===0){s=w.substring(u.length);}}}}return s;},_addData:function(u){var s=this;var t=s._tstree;t.empty();q.each(u,function(w,v){t.add(w);});},_addDirectives:function(){var s=this;s._addData(h);s._lastTSTLoad=a;},_getVariableMatches:function(x){var z=this;var A=x.split(m);var s=z.get(i);var y=A[A.length-1];A.length-=1;var t;if(A.length>0){for(var u=0;u<A.length;u++){t=A[u];if(d.isObject(s)){s=s[t];}}}var v=[];if(d.isObject(s)){q.each(o.keys(s),function(C,B){v.push(C);});if(y){var w=z._tstree;w.empty();q.each(v,function(C,B){w.add(C);});v=w.prefixSearch(y);z._lastTSTLoad=e;}}return v;}}});n.DIRECTIVES=h;k.AceEditor.AutoCompleteFreemarker=n;},"@VERSION@",{requires:["aui-ace-autocomplete-base","aui-search-ternary-search-tree"]});AUI.add("aui-ace-autocomplete",function(a){},"@VERSION@",{use:["aui-ace-autocomplete-base","aui-ace-autocomplete-list","aui-ace-autocomplete-plugin"]});