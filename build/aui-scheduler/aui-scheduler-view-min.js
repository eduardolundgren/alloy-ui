AUI.add("aui-scheduler-view",function(c2){var di=c2.Lang,bn=di.isBoolean,E=di.isFunction,aW=di.isNumber,dz=di.isObject,cO=di.isString,cz=function(A){return parseFloat(A)||0;},cC=function(dE,A){return Math.round(dE/A)*A;},aE=c2.DataType.DateMath,cX=c2.WidgetStdMod,a4=aE.WEEK_LENGTH,cF="scheduler-view",aV="scheduler-view-day",dq="scheduler-view-month",cu="scheduler-view-table",c8="scheduler-view-week",bD="activeColumn",cy="activeView",U="allDay",aD="body",bc="boundingBox",dC="cancel",be="close",at="col",aL="colDaysNode",c6="colHeaderDaysNode",O="colblank",D="coldata",aY="colday",b="colgrid",ae="colspan",q="coltime",b0="columnData",bl="columnDayHeader",a0="columnShims",a9="columnTableGrid",bL="columnTime",a8="container",a5="content",bC="creationEndDate",ah="creationStartDate",bK="currentDate",cf="data",df="day",aa="days",ay="dd",aN="delegate",H="delegateConfig",cx="disabled",bi="displayDaysInterval",cS="displayRows",af="div",bX="division",dt="dotted",ak="down",da="dragNode",B="dragging",L="draggingEvent",cN="duration",aQ="endDate",bv="event",ds="eventClass",cw="eventPlaceholder",dB="eventRecorder",v="eventWidth",cT="events",cq="eventsOverlay",aj="eventsOverlayNode",cW="filterFn",aX="first",c9="firstDayOfWeek",cj="fixedHeight",bH="grid",cc="gridContainer",bw="grip",dA="hd",cZ="header",by="headerDateFormatter",dx="headerTableNode",br="headerView",bV="headerViewConfig",a2="headerViewLabelNode",cK="height",bz="horizontal",bb="host",aT="hourHeight",x="icon",x="icon",aw="isoTime",al="label",bj="lasso",bd="left",aM="locale",o="marginRight",an="marker",bx="markercell",bp="markercellsNode",P="markers",cm="markersNode",ct="minDuration",cp="month",bF="monthContainerNode",db="monthRowContainer",f="monthRows",b8="more",I="mousedown",S="mousemove",bh="mouseup",a6="next",dD="node",av="nomonth",aF="noscroll",cY="offsetHeight",c0="offsetWidth",bE="overlay",c3="pad",aZ="paddingNode",dl="parentEvent",Y="parentNode",b6="proxy",bM="proxyNode",au="px",ao="region",bf="rendered",cU="repeated",cI="resizer",cP="resizerNode",cB="resizing",bq="right",b4="row",b3="rowsContainerNode",cE="save",u="scheduler",aS="scheduler-event",ag="scrollable",Z="shim",Q="showMore",c7="startDate",ad="startXY",cQ="strings",bg="table",G="tableGridNode",cd="tableNode",cr="tableRowContainer",dp="tableRows",cb="tbody",i="td",bZ="time",ar="timesNode",k="title",a="tl",ax="today",b2="top",dy="tr",ca="view",aK="visible",dk="week",ch="width",y="data-colnumber",m="a",bW=",",cA="-",cH=".",cv="",h="&mdash;",ci="%",ac=" ",J=c2.getClassName,bY=J(cF,aF),am=J(cF,ag);var bo=c2.Component.create({NAME:cF,AUGMENTS:[c2.WidgetStdMod],ATTRS:{bodyContent:{value:cv},eventClass:{valueFn:function(){return c2.SchedulerEvent;}},filterFn:{validator:E,value:function(A){return true;}},height:{value:600},isoTime:{value:false,validator:bn},name:{value:cv,validator:cO},navigationDateFormatter:{value:function(dE){var A=this;var dF=A.get(u);return c2.DataType.Date.format(dE,{format:"%A, %d %B, %Y",locale:dF.get(aM)});},validator:E},nextDate:{getter:"getNextDate",readOnly:true},prevDate:{getter:"getPrevDate",readOnly:true},scheduler:{lazyAdd:false,setter:"_setScheduler"},scrollable:{value:true,validator:bn},triggerNode:{setter:c2.one},visible:{value:false}},BIND_UI_ATTRS:[ag],prototype:{initializer:function(){var A=this;A.after("render",A._afterRender);},syncUI:function(){var A=this;A.syncStdContent();},adjustCurrentDate:function(){var A=this;var dF=A.get(u);var dE=dF.get(bK);dF.set(bK,dE);},flushViewCache:function(){},getNextDate:function(){},getPrevDate:function(){},getToday:function(){return aE.clearTime(new Date());},limitDate:function(dE,dF){var A=this;if(aE.after(dE,dF)){dE=aE.clone(dF);}return dE;},plotEvents:function(){},syncStdContent:function(){},syncEventUI:function(A){},_uiSetCurrentDate:function(A){},_afterRender:function(dE){var A=this;A.adjustCurrentDate();A._uiSetScrollable(A.get(ag));},_setScheduler:function(dF){var A=this;var dE=A.get(u);if(dE){A.removeTarget(dE);}if(dF){A.addTarget(dF);dF.after("eventsChange",c2.bind(A.flushViewCache,A));}return dF;},_uiSetScrollable:function(dF){var A=this;var dE=A.bodyNode;if(dE){dE.toggleClass(am,dF);dE.toggleClass(bY,!dF);}},_uiSetVisible:function(dE){var A=this;bo.superclass._uiSetVisible.apply(this,arguments);if(dE&&A.get(bf)){A.adjustCurrentDate();}}}});c2.SchedulerView=bo;var cs=di.sub;var n=c2.cached(function(){var dG=c2.config.doc,dE=dG.createElement("div"),A=dG.getElementsByTagName("body")[0],dF=0.1;if(A){dE.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;";dE.appendChild(dG.createElement("p")).style.height="1px";A.insertBefore(dE,A.firstChild);dF=dE.offsetWidth-dE.clientWidth;A.removeChild(dE);}return dF;},null,0.1);var T=function(A,dE){return function(dG){var dF=dG.all(A);return(dF.size()>=dE)?dF:null;};},j=J(x),M=J(x,bw,dt,bz),a1=J(aS),bR=J(aS,cx),cL=J(aS,b6),X=J(u,ax),aB=J(u,ax,dA),F=J(cF,D),e=J(cF,b),dc=J(cF,bH),dd=J(cF,bH,a8),a3=J(cF,df,cI,x),cJ=J(cF,df,cI),bU=J(cF,an,bX),de=J(cF,bx),R=J(cF,P),ce=J(cF,df,bg),dh=J(cF,df,cZ,bg),w=J(cF,df,cZ,df),bT=J(cF,df,cZ,df,c3,bq),cM=J(cF,df,cZ,df,aX),bu=J(cF,df,cZ,at),bG=J(cF,df,cZ,ca,al),du=J(cF,df,bg,at),aR=J(cF,df,bg,at,Z),W=J(cF,df,bg,O),N=J(cF,df,bg,aY),dm=J(cF,df,bg,q),b1=J(cF,df,bg,bZ),s='<div class="'+cJ+'">'+'<div class="'+[j,M,a3].join(ac)+'"></div>'+"</div>",ap='<div class="'+de+'">'+'<div class="'+bU+'"></div>'+"</div>",r='<span class="'+bG+'">{label}</span>',aI='<table cellspacing="0" cellpadding="0" class="'+ce+'">'+"<tbody>"+'<tr class="'+e+'" height="1">'+'<td height="0" class="'+[du,W].join(ac)+'"></td>'+'<td class="'+dd+'" colspan="1">'+'<div class="'+dc+'">'+'<div class="'+R+'"></div>'+"</div>"+"</td>"+"</tr>"+'<tr class="'+F+'">'+'<td class="'+[du,dm].join(ac)+'"></td>'+"</tr>"+"</tbody>"+"</table>",bN='<td class="'+[du,N].join(ac)+'" data-colnumber="{colNumber}">'+'<div class="'+aR+'"></div>'+"</td>",l='<div class="'+b1+'">{hour}</div>',aJ='<table cellspacing="0" cellpadding="0" class="'+dh+'">'+"<tbody>"+'<tr class="'+bu+'"></tr>'+"</tbody>"+"</table>",bQ='<th class="'+w+'" data-colnumber="{colNumber}"><a href="#">&nbsp;</a></th>',aH='<td class="'+[w,cM].join(ac)+'"></td>',C='<th class="'+[w,bT].join(ac)+'">&nbsp;</th>';
var dw=c2.Component.create({NAME:aV,ATTRS:{bodyContent:{value:cv},days:{value:1,validator:aW},delegateConfig:{value:{},setter:function(dE){var A=this;return c2.merge({dragConfig:{useShim:false},bubbleTargets:A,container:A.get(bc),nodes:cH+a1,invalid:"input, select, button, a, textarea, "+cH+bR},dE||{});},validator:dz},eventWidth:{value:95,validator:aW},filterFn:{value:function(A){return(A.getHoursDuration()<=24&&!A.get(U));}},headerDateFormatter:{value:function(dE){var A=this;var dF=A.get(u);return c2.DataType.Date.format(dE,{format:"%a %m/%d",locale:dF.get(aM)});},validator:cO},headerView:{value:true,validator:bn},headerViewConfig:{setter:function(dE){var A=this;return c2.merge({displayDaysInterval:1,displayRows:6,filterFn:function(dF){return((dF.getHoursDuration()>24)||dF.get(U));},height:"auto",visible:true},dE||{});},value:{}},hourHeight:{value:52,validator:aW},name:{value:df},navigationDateFormatter:{value:function(dE){var A=this;var dF=A.get(u);return c2.DataType.Date.format(dE,{format:"%A, %b %d, %Y",locale:dF.get(aM)});},validator:E},strings:{value:{allDay:"All day"}},headerTableNode:{valueFn:function(){return c2.Node.create(aJ);}},headerViewLabelNode:{valueFn:function(){var dE=this;var A=dE.get(cQ);return c2.Node.create(cs(r,{label:A[U]}));}},resizerNode:{valueFn:function(){return c2.Node.create(s);}},tableNode:{valueFn:function(){return c2.Node.create(aI);}},colDaysNode:{valueFn:"_valueColDaysNode"},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},markercellsNode:{valueFn:"_valueMarkercellsNode"},timesNode:{valueFn:"_valueTimesNode"}},HTML_PARSER:{colDaysNode:T(cH+N,1),colHeaderDaysNode:T(cH+w,2),headerTableNode:cH+dh,headerViewLabelNode:cH+bG,markercellsNode:T(cH+de,24),resizerNode:cH+cJ,tableNode:cH+ce,timesNode:T(cH+b1,24)},EXTENDS:c2.SchedulerView,prototype:{initializer:function(){var A=this;A[aL]=A.get(aL);A[c6]=A.get(c6);A[dx]=A.get(dx);A[bp]=A.get(bp);A[cP]=A.get(cP);A[cd]=A.get(cd);A[ar]=A.get(ar);A[bD]=null;A[b0]=A[cd].one(cH+F);A[bl]=A.headerTableNode.one(cH+bu);A[a0]=A[aL].all(cH+aR);A[bL]=A[cd].one(cH+dm);A[cc]=A[cd].one(cH+dd);A[cm]=A[cd].one(cH+R);if(A.get(br)){A[br]=new c2.SchedulerTableView(A.get(bV));}},renderUI:function(){var A=this;A[bL].setContent(A[ar]);A[cm].setContent(A[bp]);A[aL].appendTo(A[b0]);A[c6].appendTo(A[bl]);if(A[br]){A[br].set(u,A.get(u));A[br].render();}},bindUI:function(){var A=this;A[dx].delegate("click",c2.bind(A._onClickDaysHeader,A),cH+w);A[b0].delegate("mousedown",c2.bind(A._onMouseDownTableCol,A),cH+du);A[b0].delegate("mouseenter",c2.bind(A._onMouseEnterEvent,A),cH+a1);A[b0].delegate("mouseleave",c2.bind(A._onMouseLeaveEvent,A),cH+a1);A[b0].delegate("mousemove",c2.bind(A._onMouseMoveTableCol,A),cH+N);A[b0].delegate("mouseup",c2.bind(A._onMouseUpTableCol,A),cH+du);A.on("drag:end",A._onEventDragEnd);A.on("drag:start",A._onEventDragStart);A.on("drag:tickAlignY",A._dragTickAlignY);A.on("schedulerChange",A._onSchedulerChange);A.after("drag:align",A._afterDragAlign);},syncUI:function(){var A=this;dw.superclass.syncUI.apply(this,arguments);A[cc].attr(ae,A.get(aa));A._setupDragDrop();},syncStdContent:function(){var dE=this;dE.setStdModContent(cX.BODY,dE[cd].getDOM());var A=c2.NodeList.create(dE[dx]);if(dE[br]){A.push(dE[br].get(bc));A.push(dE.get(a2));}dE.setStdModContent(cX.HEADER,A);},calculateEventHeight:function(dF){var dE=this;var A=dE.get(aT);return Math.max(dF*(A/60),A/2);},calculateTop:function(dE){var A=this;return((dE.getHours()*60)+dE.getMinutes()+(dE.getSeconds()/60))*(A.get(aT)/60);},getNextDate:function(){var A=this;var dE=A.get(u).get(bK);return aE.add(dE,aE.DAY,1);},getPrevDate:function(){var A=this;var dE=A.get(u).get(bK);return aE.subtract(dE,aE.DAY,1);},getColumnByDate:function(dE){var A=this;return A[aL].item(A.getDateDaysOffset(dE));},getColumnShimByDate:function(dE){var A=this;return A[a0].item(A.getDateDaysOffset(dE));},getDateByColumn:function(dF){var A=this;var dE=aE.safeClearTime(A.get(u).get(bK));return aE.add(dE,aE.DAY,dF);},getDateDaysOffset:function(dF){var A=this;var dE=aE.safeClearTime(A.get(u).get(bK));return aE.getDayOffset(aE.safeClearTime(dF),dE);},getYCoordTime:function(dH){var dE=this;var A=dE.get(aT);var dI=cz((dH/A).toFixed(2));var dG=Math.floor((dI*100)%100*0.6);var dF=Math.floor(dI);return[dF,dG,0];},plotEvent:function(dF){var A=this;var dG=dF.get(dD);if(dG.size()<2){dF.addPaddingNode();}var dI=dF.get(dD).item(0);var dE=dF.get(dD).item(1);var dH=A.getColumnShimByDate(dF.get(aQ));var dJ=A.getColumnShimByDate(dF.get(c7));if(dJ){dJ.append(dI);if(dF.get(aK)){dI.show();}}else{dI.hide();}if(dH){if(dH.compareTo(dJ)||dF.isDayBoundaryEvent()){dE.hide();}else{dH.append(dE);if(dF.get(aK)){dE.show();}}}else{dE.hide();}dF.syncNodeUI();A.syncEventTopUI(dF);A.syncEventHeightUI(dF);},plotEvents:function(){var A=this;var dE=A.get(u);var dF=A.get(cW);A[a0].each(function(dJ,dI){var dG=dE.getEventsByDay(A.getDateByColumn(dI),true);var dH=[];dJ.empty();c2.Array.each(dG,function(dK){if(dF.apply(A,[dK])){A.plotEvent(dK);dH.push(dK);}});A.syncEventsIntersectionUI(dH);});if(A.get(br)){A.syncHeaderViewUI();}},syncColumnsUI:function(){var A=this;A[aL].each(function(dG,dF){var dE=A.getDateByColumn(dF);dG.toggleClass(X,aE.isToday(dE));});},syncDaysHeaderUI:function(){var dE=this;var dF=dE.get(u).get(bK);var dG=dE.get(by);var A=dE.get(aM);dE[c6].all(m).each(function(dJ,dI){var dH=aE.add(dF,aE.DAY,dI);dJ.toggleClass(aB,aE.isToday(dH));dJ.html(dG.call(dE,dH));});},syncEventsIntersectionUI:function(dE){var A=this;var dF=A.get(v);A.get(u).flushEvents();c2.Array.each(dE,function(dH){var dJ=A.findEventIntersections(dH,dE);var dI=dJ.length;var dG=(dF/dI);c2.Array.each(dJ,function(dL,dM){var dK=dL.get(dD).item(0);var dO=dG*dM;var dN=dG*1.7;if(dM===(dI-1)){dN=dF-dO;}dK.setStyle(ch,dN+ci);dK.setStyle(bd,dO+ci);var dP=dK.get(Y);if(dP){dP.insert(dK,dM);}dL._filtered=true;});});},syncEventHeightUI:function(dG){var dE=this;var dK=dG.get(aQ);var A=dG.get(c7);var dH=aE.clone(A);dH.setHours(24,0,0);var dI=aE.getMinutesOffset(dE.limitDate(dK,dH),A);
dG.get(dD).item(0).set(cY,dE.calculateEventHeight(dI));var dF=dG.get(dD).item(1);if(dF.inDoc()){var dJ=aE.getMinutesOffset(dK,aE.toMidnight(dG.getClearEndDate()));dF.set(cY,dE.calculateEventHeight(dJ));}},syncEventTopUI:function(dE){var A=this;dE.get(dD).item(0).setStyle(b2,A.calculateTop(dE.get(c7))+au);dE.get(dD).item(1).setStyle(b2,0);},syncHeaderViewUI:function(){var dE=this;if(dE.get(br)){var dG=dE[br];dG.plotEvents();var dH=dG.get(bc);dH.setStyle(o,n());var dF=dH.one(cH+bt);var A=Math.max(dF.get(cY),40);dG.set(cK,A);dE._fillHeight();}},calculateYDelta:function(dF,dE){var A=this;return(dE[1]-dF[1])/(A.get(aT)/2)*30;},findEventIntersections:function(dE,dF){var A=this;var dG=[];c2.Array.each(dF,function(dH){if(!dE._filtered&&dE.intersectHours(dH)){dG.push(dH);}});return dG;},getXYDelta:function(dE){var A=this;var dF=dE.currentTarget.getXY(),dG=[dE.pageX,dE.pageY];return c2.Array.map(dF,function(dI,dH){return(dG[dH]-dI);});},getTickY:function(){var A=this;return cC(Math.ceil(A.get(aT)/2),10);},roundToNearestHour:function(dE,dF){var A=this;dE.setHours(dF[0],cC(dF[1],A.getTickY()),dF[2]);},_afterDragAlign:function(dF){var dE=this;var A=dF.target;if(!dE[ad]){dE[ad]=A.actXY;}A.actXY[0]=null;},_dragTickAlignX:function(dF){var dE=this;var dI=dE[L];if(dI&&!dE[cB]){var dG=dE[cw];var dH=cz(dF.attr(y))-dE.startColNumber;dE.draggingEventStartDate=aE.add(dI.get(c7),aE.DAY,dH);var A=aE.clone(dE.draggingEventStartDate);aE.copyHours(A,dG.get(c7));dG.move(A);dE.plotEvent(dG);}},_dragTickAlignY:function(A){var dJ=this;var dE=dJ.get(u);var dL=dE.get(dB);var dG=dJ[L];if(dG){var dK=A.target.get(bb);var dH=dJ[cw];var dI=dJ.calculateYDelta(dJ[ad],dK.actXY);if(dJ[cB]){var dF=aE.add(dJ.draggingEventEndDate,aE.MINUTES,dI);if(aE.getMinutesOffset(dF,dJ.draggingEventStartDate)<dL.get(ct)){return;}dH.set(aQ,dF);}else{dH.move(aE.add(dJ.draggingEventStartDate,aE.MINUTES,dI));}dJ.plotEvent(dH);}},_setupDragDrop:function(){var dE=this;if(!dE[cw]){var dF=dE.get(u);dE[cw]=new (dE.get(ds))({scheduler:dF});dE[cw].removeTarget(dF);dE[cw].get(dD).addClass(cL).hide();}if(!dE.delegate){dE.delegate=new c2.DD.Delegate(dE.get(H));}var A=dE.delegate.dd;A.unplug(c2.Plugin.DDConstrained);A.unplug(c2.Plugin.DDNodeScroll);var dG=dE.bodyNode.get(ao);dG.bottom=Infinity;dG.top=-Infinity;A.plug(c2.Plugin.DDConstrained,{bubbleTargets:dE,constrain:dG,stickY:true,tickY:dE.get(aT)/2});A.plug(c2.Plugin.DDNodeScroll,{node:dE.bodyNode,scrollDelay:150});},_uiSetCurrentDate:function(dE){var A=this;A.syncColumnsUI();A.syncDaysHeaderUI();},_onClickDaysHeader:function(dG){var A=this;var dF=A.get(u);if(dG.target.test(m)){var dH=dF.getViewByName(df);if(dH){var dE=cz(dG.currentTarget.attr(y));dF.set(bK,A.getDateByColumn(dE));dF.set(cy,dH);}}dG.preventDefault();},_onEventDragEnd:function(dE){var A=this;var dG=A[L];if(dG){var dF=A[cw];dF.set(aK,false);dG.set(aK,true);dG.copyDates(dF);A.get(u).syncEventsUI();}A[ad]=null;A[L]=null;},_onEventDragStart:function(dF){var A=this;var dH=A[L]=A.delegate.dd.get(dD).getData(aS);if(dH){var dG=A[cw];dG.copyPropagateAttrValues(dH);A.plotEvent(dG);dH.set(aK,false);A.draggingEventStartDate=aE.clone(dH.get(c7));A.draggingEventEndDate=aE.clone(dH.get(aQ));var dE=A.getColumnByDate(dH.get(c7));A.startColNumber=dE?cz(dE.attr(y)):0;}},_onMouseDownTableCol:function(dE){var dJ=this;var dI=dE.target;var dG=dJ.get(u);var dK=dG.get(dB);if(dK&&!dG.get(cx)){dK.hideOverlay();if(dI.test(cH+aR)){dJ[ad]=[dE.pageX,dE.pageY];var dL=cz(dE.currentTarget.attr(y));var dF=dJ.getDateByColumn(dL);var A=dJ.getXYDelta(dE);dJ.roundToNearestHour(dF,dJ.getYCoordTime(A[1]));var dH=aE.add(dF,aE.MINUTES,dK.get(cN));dK.move(dF);dK.set(U,false);dK.set(aQ,dH);dJ[ah]=dF;dJ[bC]=dH;dE.halt();}else{if(dI.test([cH+cJ,cH+a3].join(bW))){dJ[cB]=true;}}}dJ.get(bc).unselectable();},_onMouseEnterEvent:function(dF){var A=this;var dG=dF.currentTarget;var dE=dG.getData(aS);if(dE&&!dE.get(cx)){A[cP].appendTo(dG);}},_onMouseLeaveEvent:function(dE){var A=this;if(!A[cB]){A._removeResizer();}},_onMouseMoveTableCol:function(dH){var A=this;var dG=dH.currentTarget;var dE=A.get(u).get(dB);if(A[bD]!==dG){A[bD]=dG;A._dragTickAlignX(A[bD]);}var dF=A[bC];var dI=A[ah];if(dI){var dJ=cC(A.calculateYDelta(A[ad],[dH.pageX,dH.pageY]),A.getTickY());if(A._delta!==dJ){if(dJ>0){dE.set(aQ,aE.add(dF,aE.MINUTES,dJ));}else{dE.set(c7,aE.add(dI,aE.MINUTES,dJ));}A.plotEvent(dE);A._delta=dJ;}}},_onMouseUpTableCol:function(dG){var A=this;var dF=A.get(u);var dE=dF.get(dB);if(dE&&!dF.get(cx)){if(A[ah]){A.plotEvent(dE);dE.showOverlay([dG.pageX,dG.pageY]);}}A[ah]=null;A[bC]=null;A[cB]=false;A[ad]=null;A._removeResizer();A.get(bc).selectable();},_onSchedulerChange:function(dE){var A=this;if(A[br]){A[br].set(u,dE.newVal);}},_removeResizer:function(){var A=this;A[cP].remove();},_valueColDaysNode:function(){var A=this;var dG=A.get(aa);var dE=[],dF=0;while(dG--){dE.push(c2.Lang.sub(bN,{colNumber:dF++}));}return c2.NodeList.create(dE.join(cv));},_valueColHeaderDaysNode:function(){var A=this;var dG=A.get(aa);var dE=[],dF=0;dE.push(aH);while(dG--){dE.push(c2.Lang.sub(bQ,{colNumber:dF++}));}dE.push(C);return c2.NodeList.create(dE.join(cv));},_valueMarkercellsNode:function(){var A=this;var dE=[],dF;for(dF=0;dF<=23;dF++){dE.push(ap);}return c2.NodeList.create(dE.join(cv));},_valueTimesNode:function(){var A=this;var dG=A.get(aw);var dF=[],dE;for(dE=0;dE<=23;dE++){dF.push(cs(l,{hour:dG?aE.toIsoTimeString(dE):aE.toUsTimeString(dE,false,true)}));}return c2.NodeList.create(dF.join(cv));}}});c2.SchedulerDayView=dw;var aA=c2.Component.create({NAME:c8,ATTRS:{bodyContent:{value:cv},days:{value:7},headerViewConfig:{value:{displayDaysInterval:a4}},name:{value:dk},navigationDateFormatter:{valueFn:function(){return this._valueNavigationDateFormatter;},validator:E}},EXTENDS:c2.SchedulerDayView,prototype:{adjustCurrentDate:function(){var A=this;var dG=A.get(u);var dE=dG.get(bK);var dF=dG.get(c9);dG.set(bK,aE.getFirstDayOfWeek(dE,dF));},getNextDate:function(){var A=this;var dF=A.get(u);var dE=dF.get(bK);var dG=A._firstDayOfWeek(dE);
return aE.add(dG,aE.WEEK,1);},getPrevDate:function(){var A=this;var dF=A.get(u);var dE=dF.get(bK);var dG=A._firstDayOfWeek(dE);return aE.subtract(dG,aE.WEEK,1);},getToday:function(){var A=this;var dE=aA.superclass.getToday.apply(this,arguments);return A._firstDayOfWeek(dE);},_firstDayOfWeek:function(dF){var A=this;var dG=A.get(u);var dE=dG.get(c9);return aE.getFirstDayOfWeek(dF,dE);},_valueNavigationDateFormatter:function(dG){var dF=this;var dH=dF.get(u);var dE=dH.get(aM);var A=dF._firstDayOfWeek(dG);var dI=c2.DataType.Date.format(A,{format:"%b %d",locale:dE});var dK=aE.add(A,aE.DAY,dF.get(aa)-1);var dJ=c2.DataType.Date.format(dK,{format:(aE.isMonthOverlapWeek(dG)?"%b %d":"%d")+", %Y",locale:dE});return[dI,h,dJ].join(ac);}}});c2.SchedulerWeekView=aA;var j=J(x),p=J(x,"arrowstop-1-l"),dn=J(x,"arrowstop-1-r"),t=J(cF,bg,b),a7=J(cF,bg,b,aX),aG=J(cF,bg,b,ax),bO=J(cF,bg,a8),dv=J(cF,bg,cT,bE,dD),az=J(cF,bg,cT,bE,dD,aD),cl=J(cF,bg,cT,bE,dD,be),aC=J(cF,bg,cZ,at),dj=J(cF,bg,cZ,df),d=J(cF,bg,cZ,bg),co=J(cF,bg,b8),c1=J(cF,bg,b4),cg=J(cF,bg,b4,a8),bt=J(cF,bg,cf),cV=J(cF,bg,cf,at),b9=J(cF,bg,cf,at,k),cR=J(cF,bg,cf,at,k,ak),ck=J(cF,bg,cf,at,k,aX),dr=J(cF,bg,cf,at,k,a6),bS=J(cF,bg,cf,at,k,ax),aO=J(cF,bg,cf,bv),c=J(cF,bg,cf,bv,bd),c4=J(cF,bg,cf,bv,cU),aq=J(cF,bg,cf,bv,bq),ai=J(cF,bg,cf,aX),aU=J(cF,bg,bH),cn=J(cF,bg,bH,aX),ba='<div class="'+bO+'">'+'<div class="'+cg+'"></div>'+"</div>",b7='<div class="'+dv+'">'+'<div class="'+az+'"></div>'+'<a href="javascript:;" class="'+cl+'">{label}</a>'+"</div>",cG='<td class="'+t+'">&nbsp;</td>',g='<th class="'+dj+'"><div>&nbsp;</div></th>',ab='<table cellspacing="0" cellpadding="0" class="'+d+'">'+"<tbody>"+'<tr class="'+aC+'"></tr>'+"</tbody>"+"</table>",bB='<a href="javascript:;" class="'+co+'">{label} {count}</a>',bJ='<div class="'+c1+'" style="top: {top}%; height: {height}%;"></div>',bP='<table cellspacing="0" cellpadding="0" class="'+bt+'">'+"<tbody></tbody>"+"</table>",bk='<table cellspacing="0" cellpadding="0" class="'+aU+'">'+"<tbody>"+"<tr></tr>"+"</tbody>"+"</table>",V='<span class="'+[j,p].join(ac)+'"></span>',bA='<span class="'+[j,dn].join(ac)+'"></span>',bI='<td class="'+cV+'"><div></div></td>',dg="<tr></tr>";var bm=c2.Component.create({NAME:cu,ATTRS:{bodyContent:{value:cv},displayDaysInterval:{value:42},displayRows:{value:4},fixedHeight:{value:true},name:{value:bg},headerDateFormatter:{value:function(dE){var A=this;var dF=A.get(u);return c2.DataType.Date.format(dE,{format:"%a",locale:dF.get(aM)});},validator:cO},navigationDateFormatter:{value:function(dE){var A=this;var dF=A.get(u);return c2.DataType.Date.format(dE,{format:"%b %Y",locale:dF.get(aM)});},validator:E},scrollable:{value:false},strings:{value:{close:"Close",showMore:"Show more"}},headerTableNode:{valueFn:function(){return c2.Node.create(ab);}},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},rowsContainerNode:{valueFn:function(){return c2.Node.create(ba);}},tableGridNode:{valueFn:"_valueTableGridNode"}},HTML_PARSER:{colHeaderDaysNode:T(cH+dj,7),headerTableNode:cH+d,rowsContainerNode:cH+bO,tableGridNode:T(cH+aU,7)},EXTENDS:c2.SchedulerView,prototype:{evtDateStack:null,evtRenderedStack:null,rowDataTableStack:null,initializer:function(){var A=this;A.evtDateStack={};A.evtRenderedStack={};A.rowDataTableStack={};A[c6]=A.get(c6);A[dx]=A.get(dx);A[b3]=A.get(b3);A[G]=A.get(G);A[bl]=A.headerTableNode.one(cH+aC);A[a9]=c2.NodeList.create();A[cr]=A[b3].one(cH+cg);A[dp]=c2.NodeList.create();},bindUI:function(){var A=this;A[b3].delegate("click",c2.bind(A._onClickMore,A),cH+co);},renderUI:function(){var A=this;var dE=A._getDisplayRowsCount();for(var dF=0;dF<dE;dF++){A[dp].push(A.buildGridRowNode(dF));}A._renderEventsOverlay();A[c6].appendTo(A[bl]);A[dp].appendTo(A[cr]);},buildEventsRow:function(dF,dK,dJ){var dE=this;var dG=dE.get(cS);var A=dE._getDisplayRowDaysCount();var dI=0;var dH=c2.Node.create(dg);dE.loopDates(dF,dK,function(dT,dP){if(dI>dP){return;}var dU=dE.getIntersectEvents(dT);var dR=dE._getRenderableEvent(dU,dF,dK,dT);var dN=c2.Node.create(bI);var dM=dN.one(af);if((dG<dU.length)&&(dJ===(dG-1))){var dS=dE.get(cQ);var dO=c2.Node.create(di.sub(bB,{count:(dU.length-(dG-1)),label:dS[Q]}));dO.setData(cT,dU);dM.append(dO);}else{if(dR){var dL=dE._getEvtSplitInfo(dR,dT,dF,dK);dN.attr(ae,dL.colspan);dI+=(dL.colspan-1);dE._syncEventNodeContainerUI(dR,dM,dL);dE._syncEventNodeUI(dR,dM,dT);var dQ=String(dT.getTime());dE.evtRenderedStack[dQ].push(dR);}}dI++;dH.append(dN);});return dH;},buildEventsTable:function(A,dH){var dN=this;var dL=dN.get(cS);var dK=aE.clearTime(dN._findCurrentIntervalStart());var dJ=String(dK.getTime()).concat(A.getTime()).concat(dH.getTime());var dM=dN.rowDataTableStack[dJ];if(!dM){dM=c2.Node.create(bP);var dG=dM.one(cb);var dF=dN.buildEventsTitleRow(dM,A,dH);dG.append(dF);for(var dI=0;dI<dL;dI++){var dE=dN.buildEventsRow(A,dH,dI);dG.append(dE);}dN.rowDataTableStack[dJ]=dM;}return dM;},buildEventsTitleRow:function(dF,dE,dH){var A=this;var dG=c2.Node.create(dg);A.loopDates(dE,dH,function(dJ,dI){var dK=c2.Node.create(bI);dK.addClass(b9).toggleClass(ck,(dI===0)).toggleClass(bS,aE.isToday(dJ)).toggleClass(dr,aE.isToday(aE.subtract(dJ,aE.DAY,1))).toggleClass(cR,aE.isToday(aE.subtract(dJ,aE.WEEK,1)));dG.append(dK.setContent(dJ.getDate()));});return dG;},buildGridRowNode:function(dI){var dF=this;var dG=dF._getDisplayRowsCount();var dE=100/dG;var A=dF._getTableGridNode(dI);var dH=c2.Node.create(di.sub(bJ,{height:dE,top:dE*dI}));dH.append(A.toggleClass(cn,(dI===0)));return dH;},flushViewCache:function(){var A=this;A.evtDateStack={};A.evtRenderedStack={};A.rowDataTableStack={};},getIntersectEvents:function(dE){var A=this;var dH=A.get(u);var dG=String(dE.getTime());if(!A.evtDateStack[dG]){var dF=dH.getIntersectEvents(dE);A.evtDateStack[dG]=dF.filter(A.get(cW));}return A.evtDateStack[dG];},getNextDate:function(){var A=this;var dG=A.get(u);var dE=dG.get(bK);var dF=A.get(bi);return aE.add(dE,aE.DAY,dF);},getPrevDate:function(){var A=this;var dG=A.get(u);var dE=dG.get(bK);var dF=A.get(bi);return aE.subtract(dE,aE.DAY,dF);
},hideEventsOverlay:function(){var A=this;A[cq].set(aK,false);},loopDates:function(A,dG,dJ,dK,dI){var dL=this;var dE=aE.clone(A);var dF=dG.getTime();var dH;for(dH=0;dE.getTime()<=dF;dH++){dJ.apply(dL,[dE,dH]);dE=aE.add(dE,(dK||aE.DAY),(dI||1));}},plotEvents:function(){var dE=this;var dH=dE._findCurrentIntervalStart();var A=aE.safeClearTime(dH);dE.flushViewCache();dE.hideEventsOverlay();dE.bodyNode.all(cH+bt).remove();var dF=dE.get(bi);var dG=Math.min(dF,a4);dE[dp].each(function(dL,dJ){var dI=aE.add(A,aE.DAY,dG*dJ);var dM=aE.add(dI,aE.DAY,dG-1);var dK=dE.buildEventsTable(dI,dM);if(dJ===0){dK.addClass(ai);}dL.append(dK);});},syncDaysHeaderUI:function(){var dE=this;var dI=dE.get(u);var dF=dI.get(bK);var dH=dE.get(by);var A=dE.get(aM);var dG=dE._findFirstDayOfWeek(dF);dE.colHeaderDaysNode.all(af).each(function(dL,dK){var dJ=aE.add(dG,aE.DAY,dK);dL.html(dH.call(dE,dJ));});},syncGridUI:function(){var dN=this;var dH=dN.getToday();var dE=dN.get(u);dN[a9].removeClass(aG);var dG=dN._findCurrentIntervalStart();var dJ=dN._findCurrentIntervalEnd();if(aE.between(dH,dG,dJ)){var A=dE.get(c9);var dL=dN._findFirstDayOfWeek(dH);var dI=aE.getWeekNumber(dH,A)-aE.getWeekNumber(dG,A);var dM=(dH.getDate()-dL.getDate());var dF=dN._getCellIndex([dM,dI]);var dK=dN[a9].item(dF);if(dK){dK.addClass(aG);}}},syncStdContent:function(){var A=this;A.setStdModContent(cX.BODY,A[b3].getDOM());A.setStdModContent(cX.HEADER,A[dx].getDOM());},_findCurrentIntervalEnd:function(){var A=this;var dG=A.get(u);var dE=dG.get(bK);var dF=A.get(bi);return aE.add(dE,aE.DAY,dF);},_findCurrentIntervalStart:function(){var A=this;var dE=A.get(u);return dE.get(bK);},_findFirstDayOfWeek:function(dF){var A=this;var dG=A.get(u);var dE=dG.get(c9);return aE.getFirstDayOfWeek(dF,dE);},_getDisplayRowsCount:function(){var A=this;var dE=A.get(bi);return Math.ceil(dE/a4);},_getDisplayRowDaysCount:function(){var A=this;var dE=A.get(bi);return Math.min(dE,a4);},_getEvtLabel:function(dF){var dE=this;var dG=dF.get(aQ);var A=dF.get(c7);return[A.getHours(),cA,dG.getHours(),ac,dF.get(a5)].join(cv);},_getEvtSplitInfo:function(dI,dL,A,dG){var dJ=this;var dE=dI.getClearStartDate();var dH=dI.getClearEndDate();var dK=aE.getDayOffset(dG,dL);var dF={colspan:Math.min(aE.getDayOffset(dH,dL),dK)+1,left:aE.before(dE,A),right:aE.after(dH,dG)};return dF;},_getRenderableEvent:function(dM,A,dG,dN){var dL=this;var dJ=String(dN.getTime());if(!dL.evtRenderedStack[dJ]){dL.evtRenderedStack[dJ]=[];}for(var dF=0;dF<dM.length;dF++){var dK=dM[dF];var dE=dK.get(c7);var dI=aE.after(dN,dE)&&!aE.isDayOverlap(dN,A);var dH=!aE.isDayOverlap(dE,dN);var dO=c2.Array.indexOf(dL.evtRenderedStack[dJ],dK)>-1;if(!dO&&(dH||dI)){return dK;}}return null;},_getTableGridNode:function(dJ){var dE=this;var dG=dE.get(bi);var A=dE[G].item(dJ);var dI=A.one(dy);for(var dF=0;dF<Math.min(dG,a4);dF++){var dH=c2.Node.create(cG);dI.append(dH);dE[a9].push(dH);}return A;},_onClickMore:function(dF){var A=this;var dG=dF.target;var dE=dG.getData(cT);var dH=c2.NodeList.create();c2.Array.each(dE,function(dJ){var dI=dJ.get(dD).item(0).clone();dI.setData(aS,dJ);dI.setStyles({height:"auto",left:0,position:"relative",top:0,width:"auto"});dH.push(dI);});A[cq].bodyNode.one(cH+az).setContent(dH);A[cq].setAttrs({visible:true,xy:dG.getXY()});},_renderEventsOverlay:function(){var dE=this;var A=dE.get(cQ);dE[cq]=new c2.Overlay({align:{points:[a,a]},bodyContent:di.sub(b7,{label:A[be]}),render:dE[b3],visible:false,width:250,zIndex:450});dE[cq].bodyNode.delegate("click",c2.bind(dE.hideEventsOverlay,dE),cH+cl);},_syncEventNodeContainerUI:function(dE,dG,dF){var A=this;dG.addClass(aO);if(dF.left){dG.addClass(c).prepend(V);}if(dF.right){dG.addClass(aq).append(bA);}if(dE.get(dl)){dG.addClass(c4);}},_syncEventNodeUI:function(dM,dE,dO){var dN=this;var dH=dN.get(u);var A=dH.get(c9);var dG=dM.get(dD);var dF=dM.get(c7);var dL=aE.clearTime(dN._findCurrentIntervalStart());var dI=aE.getFirstDayOfWeek(new Date(Math.max(dF,dL)),A);var dK=Math.floor(aE.getDayOffset(dO,dI)/a4);if(dG.size()<=dK){dM.addPaddingNode();}var dJ=dG.item(dK);dJ.setStyles({height:"auto",left:0,top:0,width:"auto"});dJ.appendTo(dE);dM.syncNodeUI();},_uiSetCurrentDate:function(dE){var A=this;A.syncDaysHeaderUI();A.syncGridUI();},_valueColHeaderDaysNode:function(){var A=this;var dE=A.get(bi);var dF=Math.min(dE,a4);return A._valueNodeList(dF,g);},_valueTableGridNode:function(){var A=this;var dE=A.get(bi);var dF=Math.min(dE,a4);return A._valueNodeList(dF,bk);},_valueNodeList:function(dG,dF){var A=this;var dE=[];while(dG--){dE.push(dF);}return c2.NodeList.create(dE.join(cv));}}});c2.SchedulerTableView=bm;var bs=J(dq,bg,cf,at,av);var aP=c2.Component.create({NAME:dq,ATTRS:{displayDaysInterval:{readOnly:true,value:42},name:{value:cp},navigationDateFormatter:{value:function(dE){var A=this;var dF=A.get(u);return c2.DataType.Date.format(dE,{format:"%B %Y",locale:dF.get(aM)});},validator:E}},EXTENDS:c2.SchedulerTableView,prototype:{getNextDate:function(){var A=this;var dF=A.get(u);var dE=dF.get(bK);return aE.add(dE,aE.MONTH,1);},getPrevDate:function(){var A=this;var dF=A.get(u);var dE=dF.get(bK);return aE.subtract(dE,aE.MONTH,1);},plotEvents:function(){var A=this;c2.SchedulerMonthView.superclass.plotEvents.apply(A,arguments);var dF=A.get(u);var dE=dF.get(bK);var dI=aE.findMonthEnd(dE);var dH=aE.findMonthStart(dE);var dG=A._findCurrentIntervalStart();var dJ=A[cr].all(cH+b9);dJ.each(function(dM,dK){var dL=aE.add(dG,aE.DAY,dK);if(aE.before(dL,dH)||aE.after(dL,dI)){dM.addClass(bs);}});},_findCurrentIntervalStart:function(){var A=this;var dG=A.get(u);var dE=dG.get(bK);var dF=aE.findMonthStart(dE);return A._findFirstDayOfWeek(dF);},_findFirstDayOfWeek:function(dF){var A=this;var dG=A.get(u);var dE=dG.get(c9);return aE.getFirstDayOfWeek(dF,dE);}}});c2.SchedulerMonthView=aP;var z=J(cF,bg,B),K=J(cF,bg,bj),cD=J(cF,bg,b6,dD),b5='<div class="'+K+'"></div>',c5='<div class="'+cD+'"></div>';c2.SchedulerTableViewDD=function(){};c2.SchedulerTableViewDD.ATTRS={delegateConfig:{value:{},setter:function(dE){var A=this;
return c2.merge({dragConfig:{offsetNode:false,useShim:false},bubbleTargets:A,container:A.get(bc),nodes:cH+a1,invalid:"input, select, button, a, textarea, "+cH+bR},dE||{});},validator:dz}};c2.mix(c2.SchedulerTableViewDD.prototype,{initializer:function(){var A=this;A[bM]=c2.Node.create(c5);A.after(A.viewDDBindUI,A,"bindUI");A.after(A.viewDDRenderUI,A,"renderUI");A.after(A.viewDDSyncUI,A,"syncUI");},viewDDBindUI:function(){var A=this;var dE=A.get(u).get(dB);if(dE){dE.on({cancel:c2.bind(A.removeLasso,A),save:c2.bind(A.removeLasso,A)});}A[b3].on({mousedown:c2.bind(A._onMouseDownGrid,A),mousemove:c2.bind(A._onMouseMoveGrid,A),mouseup:c2.bind(A._onMouseUpGrid,A)});A.after("drag:align",A._afterDragAlign);A.on("drag:end",A._onEventDragEnd);A.on("drag:start",A._onEventDragStart);},viewDDRenderUI:function(){var A=this;},viewDDSyncUI:function(){var A=this;A._setupDragDrop();},removeLasso:function(){var A=this;if(A[bj]){A[bj].remove();}},removeProxy:function(){var A=this;if(A[bM]){A[bM].remove();}},renderLasso:function(dK,dE){var dQ=this;var dH=dK;var dJ=dE;if(dK[1]>dE[1]){dH=dE;dJ=dK;}var dR=dH[0],dM=dH[1],dF=dJ[0],A=dJ[1];dQ.removeLasso();dQ.lasso=c2.NodeList.create();for(var dG=dM;dG<=A;dG++){var dI=dQ.gridCellHeight,dP=dQ.gridCellWidth,dN=0,dL=(dI*dG);if(dG===dM){if(dM===A){dN+=Math.min(dR,dF)*dP;dP*=Math.abs(dF-dR)+1;}else{dN+=dR*dP;dP*=a4-dR;}}else{if(dG===A){dP*=dF+1;}else{dP*=a4;}}var dO=c2.Node.create(b5);dQ.lasso.push(dO);dQ[b3].append(dO);dO.sizeTo(dP,dI);dO.setXY(dQ._offsetXY([dN,dL],1));}},_afterDragAlign:function(A){var dK=this;var dL=A.target;var dH=dK.bodyNode.get(ao);var dI={bottom:A.pageY,left:A.pageX,right:A.pageX,top:A.pageY};if(!c2.DOM.inRegion(null,dH,true,dI)){return;}var dJ=dK[L];var dE=[A.pageX,A.pageY];var dG=dK._findPosition(dK._offsetXY(dE,-1));if(dJ&&dK._hasLassoChanged(dG)){dK.lassoLastPosition=dG;var dF=aE.add(dK._getPositionDate(dG),aE.MINUTES,dJ.getMinutesDuration());dK.renderLasso(dG,dK._getDatePosition(dF));}},_findPosition:function(dG){var A=this;var dF=Math.floor(dG[0]/A.gridCellWidth);var dE=Math.floor(dG[1]/A.gridCellHeight);return[dF,dE];},_getCellIndex:function(dE){var A=this;return dE[1]*a4+dE[0];},_getDatePosition:function(dF){var dE=this;var dG=dE._findCurrentIntervalStart();var dH=aE.getDayOffset(dF,dG);var A=[];A[1]=Math.floor(dH/a4);A[0]=dH%a4;return A;},_getPositionDate:function(dF){var dE=this;var dH=dE._findCurrentIntervalStart();var A=aE.safeClearTime(dE._findFirstDayOfWeek(dH));var dG=aE.add(A,aE.DAY,dE._getCellIndex(dF));dG.setHours(0,0,0,0);return dG;},_hasLassoChanged:function(dE){var A=this;var dF=A.lassoLastPosition||A.lassoStartPosition;return dF&&((dE[0]!==dF[0])||(dE[1]!==dF[1]));},_offsetXY:function(dG,dF){var A=this;var dE=A[b3].getXY();return[dG[0]+dE[0]*dF,dG[1]+dE[1]*dF];},_onEventDragEnd:function(dE){var A=this;var dF=A[L];if(dF){dF.move(A._getPositionDate(A.lassoLastPosition));dF.set(aK,true);A[b3].removeClass(z).unselectable();dE.target.set(da,A.originalDragNode);A.removeLasso();A.removeProxy();A.get(u).syncEventsUI();}A[L]=null;},_onEventDragStart:function(dH){var A=this;var dI=A[L]=A[aN][ay].get(dD).getData(aS);if(dI){A._syncCellDimensions();var dF=[dH.pageX,dH.pageY];var dG=A._findPosition(A._offsetXY(dF,-1));var dE=aE.add(A._getPositionDate(dG),aE.MINUTES,dI.getMinutesDuration());A.renderLasso(dG,A._getDatePosition(dE));dI.set(aK,false);A._syncProxyNodeUI(dI);A.lassoStartPosition=A.lassoLastPosition=dG;A[b3].addClass(z).unselectable();A.originalDragNode=dH.target.get(da);dH.target.set(da,A[bM]);}},_onMouseDownGrid:function(dH){var A=this;var dG=A.get(u);var dF=dG.get(dB);var dI=dH.target;if(dF&&dI.test([cH+t,cH+cV].join(bW))){A._recording=true;A._syncCellDimensions();var dE=A._offsetXY([dH.pageX,dH.pageY],-1);A.lassoStartPosition=A.lassoLastPosition=A._findPosition(dE);A.renderLasso(A.lassoStartPosition,A.lassoLastPosition);A[b3].unselectable();}},_onMouseMoveGrid:function(dG){var dE=this;var dH=dG.currentTarget;var dF=[dG.pageX,dG.pageY];var A=dE._findPosition(dE._offsetXY(dF,-1));if(dE._recording&&dE._hasLassoChanged(A)){dE.lassoLastPosition=A;dE.renderLasso(dE.lassoStartPosition,A);}},_onMouseUpGrid:function(dJ){var dE=this;var dI=dE.get(u);var dG=dI.get(dB);if(dG&&dE._recording&&!dI.get(cx)){var dH=dE._getPositionDate(dE.lassoStartPosition);var dF=dE._getPositionDate(dE.lassoLastPosition);var A=new Date(Math.min(dH,dF));A.setHours(0,0,0);var dK=new Date(Math.max(dH,dF));dK.setHours(23,59,59);dG.set(U,true);dG.set(aQ,dK);dG.set(c7,A);dG.showOverlay([dJ.pageX,dJ.pageY]);dE._recording=false;}},_setupDragDrop:function(){var dE=this;if(!dE[aN]){dE[aN]=new c2.DD.Delegate(dE.get(H));}var A=dE[aN][ay];A.unplug(c2.Plugin.DDConstrained);A.unplug(c2.Plugin.DDNodeScroll);A.unplug(c2.Plugin.DDProxy);A.plug(c2.Plugin.DDConstrained,{bubbleTargets:dE,constrain:dE.bodyNode});A.plug(c2.Plugin.DDNodeScroll,{node:dE.bodyNode,scrollDelay:150});A.plug(c2.Plugin.DDProxy,{moveOnEnd:false,positionProxy:false});},_syncCellDimensions:function(){var A=this;var dF=A.get(bi);var dE=Math.ceil(dF/a4);var dG=Math.min(dF,a4);A.gridCellHeight=A[b3].get(cY)/dE;A.gridCellWidth=A[b3].get(c0)/dG;},_syncProxyNodeUI:function(dE){var A=this;var dF=dE.get(dD).item(0);A[bM].setStyles({backgroundColor:dF.getStyle("backgroundColor"),display:"block",width:"200px"});A[bM].appendTo(A[b3]);A[bM].setContent(dE.get(a5));}});c2.Base.mix(c2.SchedulerTableView,[c2.SchedulerTableViewDD]);},"@VERSION@",{skinnable:true,requires:["aui-scheduler-event","aui-datatype","aui-button-item","dd-drag","dd-delegate","dd-drop","dd-constrain"]});