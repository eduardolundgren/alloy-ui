AUI.add("aui-tree-data",function(o){var i=o.Lang,n=i.isArray,l=i.isBoolean,m=i.isObject,c=i.isUndefined,z="boundingBox",g="children",p="container",r=".",j="id",x="index",u="lazyLoad",e="leaf",w="nextSibling",C="node",d="ownerTree",h="parentNode",t="prevSibling",q="previousSibling",v="tree",s="tree-node",b="tree-data",k=function(A){return(o.instanceOf(A,o.TreeNode));},f=function(A){return(o.instanceOf(A,o.TreeView));},y=o.getClassName,a=y(v,C);var B=function(){};B.ATTRS={container:{setter:o.one},children:{value:[],validator:n,setter:"_setChildren"},index:{value:{}}};o.mix(B.prototype,{childrenLength:0,initializer:function(){var A=this;A.publish("move");A.publish("append",{defaultFn:A._appendChild});A.publish("remove",{defaultFn:A._removeChild});},destructor:function(){var A=this;A.eachChildren(function(D){D.destroy();},true);},getNodeById:function(D){var A=this;return A.get(x)[D];},isRegistered:function(D){var A=this;return !!(A.get(x)[D.get(j)]);},updateReferences:function(F,G,J){var K=this;var I=F.get(h);var A=F.get(d);var H=I&&(I!==G);if(I){if(H){var D=I.get(g);o.Array.removeItem(D,F);I.set(g,D);}I.unregisterNode(F);}if(A){A.unregisterNode(F);}F.set(h,G);F.set(d,J);if(G){G.registerNode(F);}if(J){J.registerNode(F);}if(A!=J){F.eachChildren(function(L){K.updateReferences(L,L.get(h),J);});}if(H){var E=K.getEventOutputMap(F);if(!I.get("children").length){I.collapse();I.hideHitArea();}E.tree.oldParent=I;E.tree.oldOwnerTree=A;K.bubbleEvent("move",E);}},refreshIndex:function(){var A=this;A.updateIndex({});A.eachChildren(function(D){A.registerNode(D);},true);},registerNode:function(F){var A=this;var E=F.get(j);var D=A.get(x);if(E){D[E]=F;}if(f(A)){F.addTarget(A);F.set(d,A);}F._inheritOwnerTreeAttrs();A.updateIndex(D);},updateIndex:function(D){var A=this;if(D){A.set(x,D);}},unregisterNode:function(E){var A=this;var D=A.get(x);delete D[E.get(j)];if(f(A)){E.removeTarget(A);}A.updateIndex(D);},collapseAll:function(){var A=this;A.eachChildren(function(D){D.collapse();},true);},expandAll:function(){var A=this;A.eachChildren(function(D){D.expand();},true);},selectAll:function(){var A=this;A.eachChildren(function(D){D.select();},true);},unselectAll:function(){var A=this;A.eachChildren(function(D){D.unselect();},true);},eachChildren:function(F,D){var A=this;var E=A.getChildren(D);o.Array.each(E,function(G){if(G){F.apply(A,arguments);}});},eachParent:function(E){var D=this;var A=D.get(h);while(A){if(A){E.call(D,A);}A=A.get(h);}},bubbleEvent:function(G,F,H,E){var D=this;D.fire(G,F);if(!H){var A=D.get(h);F=F||{};if(c(E)){E=true;}F.stopActionPropagation=E;while(A){A.fire(G,F);A=A.get(h);}}},createNode:function(D){var A=this;var E=o.TreeNode.nodeTypes[m(D)?D.type:D]||o.TreeNode;return new E(m(D)?D:{});},appendChild:function(F,E){var A=this;var D=A.getEventOutputMap(F);A.bubbleEvent("append",D,E);},_appendChild:function(J){if(J.stopActionPropagation){return false;}var A=this;var I=J.tree.node;var D=A.get(d);var G=A.get(g);A.updateReferences(I,A,D);var H=G.push(I);A.set(g,G);var F=H-2;var E=A.item(F);I._nextSibling=null;I._prevSibling=E;I.render(A.get(p));},item:function(D){var A=this;return A.get(g)[D];},indexOf:function(D){var A=this;return o.Array.indexOf(A.get(g),D);},hasChildNodes:function(){var A=this;return(A.getChildrenLength()>0);},getChildren:function(D){var A=this;var F=[];var E=A.get(g);F=F.concat(E);if(D){A.eachChildren(function(G){F=F.concat(G.getChildren(D));});}return F;},getChildrenLength:function(){var A=this;return(A.childrenLength||A.get(g).length);},getEventOutputMap:function(D){var A=this;return{tree:{instance:A,node:D||A}};},removeChild:function(E){var A=this;var D=A.getEventOutputMap(E);A.bubbleEvent("remove",D);},_removeChild:function(G){if(G.stopActionPropagation){return false;}var A=this;var F=G.tree.node;var D=A.get(d);if(A.isRegistered(F)){F.set(h,null);A.unregisterNode(F);F.set(d,null);if(D){D.unregisterNode(F);}F.get(z).remove();var E=A.get(g);o.Array.removeItem(E,F);A.set(g,E);}},empty:function(){var A=this;A.eachChildren(function(E){var D=E.get(h);if(D){D.removeChild(E);}});},insert:function(J,G,H){var N=this;G=G||this;if(G===J){return false;}var A=G.get(h);if(J&&A){var I=J.get(z);var O=G.get(z);var M=G.get(d);if(H==="before"){O.placeBefore(I);}else{if(H==="after"){O.placeAfter(I);}}var D=[];var L=A.get(z).all("> ul > li");L.each(function(P){D.push(P.getData(s));});var K=I.get(w);J.set(w,K&&K.getData(s));var F=I.get(q);J.set(t,F&&F.getData(s));G.updateReferences(J,A,M);A.set(g,D);}J.render();var E=G.getEventOutputMap(J);E.tree.refTreeNode=G;G.bubbleEvent("insert",E);},insertAfter:function(E,D){var A=this;A.insert(E,D,"after");},insertBefore:function(E,D){var A=this;A.insert(E,D,"before");},getNodeByChild:function(E){var A=this;var D=E.ancestor(r+a);if(D){return D.getData(s);}return null;},_inheritOwnerTreeAttrs:i.emptyFn,_setChildren:function(F){var D=this;var I=[];var E=D.get(p);if(!E){E=D._createNodeContainer();}var G=D;if(k(D)){G=D.get(d);}var A=f(G);var H=true;if(A){H=G.get(u);}D.updateIndex({});if(F.length>0){D.set(e,false);}o.Array.each(F,function(M,K){if(M){if(!k(M)&&m(M)){var L=M[g];var J=L&&L.length;M[d]=G;M[h]=D;if(J&&H){delete M[g];}M=D.createNode(M);if(J&&H){M.childrenLength=L.length;o.setTimeout(function(){M.set(g,L);},50);}}if(A){G.registerNode(M);}M.render(E);if(o.Array.indexOf(I,M)===-1){I.push(M);}}});return I;}});o.TreeData=B;},"@VERSION@",{skinnable:false,requires:["aui-base","aui-task-manager"]});AUI.add("aui-tree-node",function(ai){var X=ai.Lang,aS=X.isString,aI=X.isBoolean,a1="alwaysShowHitArea",T="",u="boundingBox",h="children",aO="clearfix",z="collapsed",a="container",ag="content",x="contentBox",o="draggable",k="expanded",r="helper",aa="hidden",g="hitAreaEl",M="hitarea",Y="icon",a0="iconEl",d="invalid",ay="id",ao="label",ab="labelEl",W="lastSelected",aN="leaf",s="node",aq="over",ad="ownerTree",f="parentNode",aE="radio",aY="rendered",aM="selected",v=" ",i="tree",N="tree-node",aW=function(){return Array.prototype.slice.call(arguments).join(v);},av=function(A){return(A instanceof ai.TreeNode);
},aU=function(A){return(A instanceof ai.TreeView);},K=ai.getClassName,al=K(r,aO),D=K(i,z),b=K(i,a),aH=K(i,x),a2=K(i,k),w=K(i,aa),aA=K(i,M),J=K(i,Y),l=K(i,ao),aK=K(i,s),I=K(i,s,ag),E=K(i,s,ag,d),aB=K(i,s,aa,M),j=K(i,s,aN),aR=K(i,s,aq),O=K(i,s,aM),ah='<div class="'+aA+'"></div>',t='<div class="'+J+'"></div>',e='<div class="'+l+'"></div>',aZ="<ul></ul>",y='<li class="'+aK+'"></li>',ae='<div class="'+aW(al,I)+'"></div>';var R=ai.Component.create({NAME:N,ATTRS:{boundingBox:{valueFn:function(){return ai.Node.create(y);}},contentBox:{valueFn:function(){return ai.Node.create(ae);}},draggable:{value:true,validator:aI},ownerTree:{value:null},label:{value:T,validator:aS},expanded:{value:false,validator:aI},id:{validator:aS,valueFn:function(){return ai.guid();}},leaf:{value:true,setter:function(A){if(A&&this.get(h).length){return false;}return A;},validator:aI},nextSibling:{getter:"_getSibling",value:null,validator:av},prevSibling:{getter:"_getSibling",value:null,validator:av},parentNode:{value:null,validator:function(A){return av(A)||aU(A);}},labelEl:{setter:ai.one,valueFn:function(){var A=this.get(ao);return ai.Node.create(e).html(A).unselectable();}},hitAreaEl:{setter:ai.one,valueFn:function(){return ai.Node.create(ah);}},alwaysShowHitArea:{value:true,validator:aI},iconEl:{setter:ai.one,valueFn:function(){return ai.Node.create(t);}},tabIndex:{value:null},rendered:{validator:aI,value:false}},AUGMENTS:[ai.TreeData],EXTENDS:ai.Base,prototype:{BOUNDING_TEMPLATE:y,CONTENT_TEMPLATE:ae,initializer:function(){var A=this;var a5=A.get(u);a5.setData(N,A);A._syncTreeNodeBBId();A._uiSetDraggable(A.get(o));A._uiSetExpanded(A.get(k));A._uiSetLeaf(A.get(aN));},bindUI:function(){var A=this;A.after("childrenChange",ai.bind(A._afterSetChildren,A));A.after("draggableChange",ai.bind(A._afterDraggableChange,A));A.after("expandedChange",ai.bind(A._afterExpandedChange,A));A.after("idChange",A._afterSetId,A);A.after("leafChange",ai.bind(A._afterLeafChange,A));},render:function(a5){var A=this;if(!A.get(aY)){A.renderUI();A.bindUI();A.syncUI();A.set(aY,true);}if(a5){A.get(u).appendTo(a5);}},renderUI:function(){var A=this;A._renderBoundingBox();A._renderContentBox();},syncUI:function(){var A=this;A._syncHitArea(A.get(h));},_afterDraggableChange:function(a5){var A=this;A._uiSetDraggable(a5.newVal);},_afterExpandedChange:function(a5){var A=this;A._uiSetExpanded(a5.newVal);},_afterLeafChange:function(a5){var A=this;A._uiSetLeaf(a5.newVal);},_afterSetChildren:function(a5){var A=this;A._syncHitArea(a5.newVal);},_renderContentBox:function(a7){var A=this;var a5=A.get(x);if(!A.isLeaf()){var a6=A.get(k);a5.addClass(a6?a2:D);if(a6){A.expand();}}return a5;},_renderBoundingBox:function(){var A=this;var a6=A.get(u);var a5=A.get(x);a5.append(A.get(a0));a5.append(A.get(ab));a6.append(a5);var a7=A.get(a);if(a7){if(!A.get(k)){a7.addClass(w);}a6.append(a7);}return a6;},_createNodeContainer:function(){var A=this;var a5=A.get(a)||ai.Node.create(aZ);a5.addClass(b);A.set(a,a5);return a5;},_syncHitArea:function(a5){var A=this;if(A.get(a1)||a5.length){A.showHitArea();}else{A.hideHitArea();A.collapse();}},appendChild:function(){var A=this;if(!A.isLeaf()){ai.TreeNode.superclass.appendChild.apply(A,arguments);}},collapse:function(){var A=this;A.set(k,false);},collapseAll:function(){var A=this;ai.TreeNode.superclass.collapseAll.apply(A,arguments);A.collapse();},contains:function(A){return A.isAncestor(this);},expand:function(){var A=this;A.set(k,true);},expandAll:function(){var A=this;ai.TreeNode.superclass.expandAll.apply(A,arguments);A.expand();},getDepth:function(){var a5=this;var a6=0;var A=a5.get(f);while(A){++a6;A=A.get(f);}return a6;},hasChildNodes:function(){var A=this;return(!A.isLeaf()&&ai.TreeNode.superclass.hasChildNodes.apply(this,arguments));},isSelected:function(){return this.get(x).hasClass(O);},isLeaf:function(){var A=this;return A.get(aN);},isAncestor:function(a6){var a5=this;var A=a5.get(f);while(A){if(A===a6){return true;}A=A.get(f);}return false;},toggle:function(){var A=this;if(A.get(k)){A.collapse();}else{A.expand();}},select:function(){var A=this;var a5=A.get(ad);if(a5){a5.set(W,A);}A.get(x).addClass(O);A.fire("select");},unselect:function(){var A=this;A.get(x).removeClass(O);A.fire("unselect");},over:function(){this.get(x).addClass(aR);},out:function(){this.get(x).removeClass(aR);},showHitArea:function(){var A=this;var a5=A.get(g);a5.removeClass(aB);},hideHitArea:function(){var A=this;var a5=A.get(g);a5.addClass(aB);},_syncTreeNodeBBId:function(a5){var A=this;A.get(u).attr(ay,A.get(ay));},_getSibling:function(a8,a5){var A=this;var a7="_"+a5;var a6=A[a7];if(a6!==null&&!av(a6)){a6=null;A[a7]=a6;}return a6;},_uiSetDraggable:function(a6){var A=this;var a5=A.get(x);a5.toggleClass(E,!a6);},_uiSetExpanded:function(a7){var A=this;if(!A.isLeaf()){var a6=A.get(a);var a5=A.get(x);if(a7){a5.replaceClass(D,a2);if(a6){a6.removeClass(w);}}else{a5.replaceClass(a2,D);if(a6){a6.addClass(w);}}}},_uiSetLeaf:function(a6){var A=this;var a5=A.get(x);if(a6){A.get(a).remove();A.get(g).remove();}else{a5.prepend(A.get(g));A._createNodeContainer();A._uiSetExpanded(A.get(k));}a5.toggleClass(j,a6);}}});ai.TreeNode=R;var aD=X.isFunction,L=X.isObject,aj=X.isValue,aT="cache",az="end",ap="io",aJ="limit",aX="loaded",a3="loading",aF="Load more results",an="paginator",at="start",ax="tree-node-io",c="paginatorClick",aG=K(i,s,an),C=K(i,s,ap,a3),aC='<a class="'+aG+'" href="javascript:void(0);">{moreResultsLabel}</a>';var Q=ai.Component.create({NAME:ax,ATTRS:{io:{lazyAdd:false,value:null,setter:function(A){return this._setIO(A);}},loading:{value:false,validator:aI},loaded:{value:false,validator:aI},cache:{value:true,validator:aI},leaf:{value:false,validator:aI},paginator:{setter:function(a6){var a5=this;var A=ai.Node.create(X.sub(aC,{moreResultsLabel:a6.moreResultsLabel||aF}));return ai.merge({alwaysVisible:false,autoFocus:true,element:A,endParam:az,limitParam:aJ,start:0,startParam:at},a6);},validator:L}},EXTENDS:ai.TreeNode,prototype:{bindUI:function(){var A=this;ai.TreeNodeIO.superclass.bindUI.apply(this,arguments);
A._bindPaginatorUI();A._createEvents();},syncUI:function(){var A=this;ai.TreeNodeIO.superclass.syncUI.apply(this,arguments);A._syncPaginatorUI();},_bindPaginatorUI:function(){var A=this;var a6=A.get(an);if(a6){var a5=ai.bind(A._handlePaginatorClickEvent,A);a6.element.on("click",a5);}},createNodes:function(a5){var A=this;ai.Array.each(ai.Array(a5),function(a7){var a6=A.createNode.call(A,a7);A.appendChild(a6);});A._syncPaginatorUI(a5);},expand:function(){var A=this;var a5=A.get(aT);var a8=A.get(ap);var a6=A.get(aX);var a7=A.get(a3);if(!a5){A.set(aX,false);}if(a8&&!a6&&!a7&&!this.hasChildNodes()){if(!a5){A.empty();}A.initIO();}else{ai.TreeNodeIO.superclass.expand.apply(this,arguments);}},initIO:function(){var a5=this;var a6=a5.get(ap);if(aD(a6.cfg.data)){a6.cfg.data=a6.cfg.data.call(a5,a5);}a5._syncPaginatorIOData(a6);if(aD(a6.loader)){var A=ai.bind(a6.loader,a5);A(a6.url,a6.cfg,a5);}else{ai.io.request(a6.url,a6.cfg);}},ioStartHandler:function(){var A=this;var a5=A.get(x);A.set(a3,true);a5.addClass(C);},ioCompleteHandler:function(){var A=this;var a5=A.get(x);A.set(a3,false);A.set(aX,true);a5.removeClass(C);},ioSuccessHandler:function(){var bc=this;var a8=bc.get(ap);var bb=bc.get(ad);var a9=Array.prototype.slice.call(arguments);var a6=a9.length;var A=a9[1];if(a6>=3){var a5=a9[2];try{A=ai.JSON.parse(a5.responseText);}catch(a7){}}var ba=a8.formatter;if(ba){A=ba(A);}bc.createNodes(A);bc.expand();if(bb&&bb.ddDelegate){bb.ddDelegate.syncTargets();}},ioFailureHandler:function(){var A=this;A.set(a3,false);A.set(aX,false);},_createEvents:function(){var A=this;A.publish(c,{defaultFn:A._defPaginatorClickFn,prefix:ax});},_defPaginatorClickFn:function(a5){var A=this;var a6=A.get(an);if(aj(a6.limit)){a6.start+=a6.limit;}if(A.get(ap)){A.initIO();}},_handlePaginatorClickEvent:function(a7){var A=this;var a6=A.get(ad);var a5=A.getEventOutputMap(A);A.fire(c,a5);if(a6){a6.fire(c,a5);}a7.halt();},_inheritOwnerTreeAttrs:function(){var a5=this;var a6=a5.get(ad);if(a6){if(!a5.get(ap)){a5.set(ap,ai.clone(a6.get(ap)));}if(!a5.get(an)){var A=a6.get(an);if(A&&A.element){A.element=A.element.clone();}a5.set(an,A);}}},_setIO:function(a6){var A=this;if(!a6){return null;}else{if(aS(a6)){a6={url:a6};}}a6=a6||{};a6.cfg=a6.cfg||{};a6.cfg.on=a6.cfg.on||{};var a5={start:ai.bind(A.ioStartHandler,A),complete:ai.bind(A.ioCompleteHandler,A),success:ai.bind(A.ioSuccessHandler,A),failure:ai.bind(A.ioFailureHandler,A)};ai.each(a5,function(a9,a7){var ba=a6.cfg.on[a7];if(aD(ba)){var a8=function(){a9.apply(A,arguments);ba.apply(A,arguments);};a6.cfg.on[a7]=ai.bind(a8,A);}else{a6.cfg.on[a7]=a9;}});return a6;},_syncPaginatorIOData:function(a7){var A=this;var a6=A.get(an);if(a6&&aj(a6.limit)){var a5=a7.cfg.data||{};a5[a6.limitParam]=a6.limit;a5[a6.startParam]=a6.start;a5[a6.endParam]=(a6.start+a6.limit);a7.cfg.data=a5;}},_syncPaginatorUI:function(a7){var bb=this;var a5=bb.get(h);var bc=bb.get(an);if(bc){var ba=true;if(a7){ba=(a7.length>0);}var a6=bb.getChildrenLength();var A=bc.start;var a9=bc.total||a6;var bd=ba&&(a9>a6);if(bc.alwaysVisible||bd){bb.get(a).append(bc.element.show());if(bc.autoFocus){try{bc.element.focus();}catch(a8){}}}else{bc.element.hide();}}}}});ai.TreeNodeIO=Q;var m="checkbox",q="checked",af="checkContainerEl",aP="checkEl",S="checkName",ac=".",n="name",F="tree-node-check",am=K(i,s,m),au=K(i,s,m,a),aw=K(i,s,q),V='<div class="'+au+'"></div>',ar='<input class="'+am+'" type="checkbox" />';var aL=ai.Component.create({NAME:F,ATTRS:{checked:{value:false,validator:aI},checkName:{value:F,validator:aS},checkContainerEl:{setter:ai.one,valueFn:function(){return ai.Node.create(V);}},checkEl:{setter:ai.one,valueFn:function(){var A=this.get(S);return ai.Node.create(ar).attr(n,A);}}},EXTENDS:ai.TreeNodeIO,prototype:{initializer:function(){var A=this;A._uiSetChecked(A.get(q));},renderUI:function(){var a5=this;ai.TreeNodeCheck.superclass.renderUI.apply(a5,arguments);var a6=a5.get(ab);var A=a5.get(aP);var a7=a5.get(af);A.hide();a7.append(A);a6.placeBefore(a7);if(a5.isChecked()){a5.check();}},bindUI:function(){var A=this;var a5=A.get(x);var a6=A.get(ab);ai.TreeNodeCheck.superclass.bindUI.apply(A,arguments);A.after("checkedChange",ai.bind(A._afterCheckedChange,A));a5.delegate("click",ai.bind(A.toggleCheck,A),ac+au);a5.delegate("click",ai.bind(A.toggleCheck,A),ac+l);a6.swallowEvent("dblclick");},check:function(a5){var A=this;A.set(q,true,{originalTarget:a5});},uncheck:function(a5){var A=this;A.set(q,false,{originalTarget:a5});},toggleCheck:function(){var a5=this;var A=a5.get(aP);var a6=A.attr(q);if(!a6){a5.check();}else{a5.uncheck();}},isChecked:function(){var A=this;return A.get(q);},_afterCheckedChange:function(a5){var A=this;A._uiSetChecked(a5.newVal);},_uiSetChecked:function(a5){var A=this;if(a5){A.get(x).addClass(aw);A.get(aP).attr(q,q);}else{A.get(x).removeClass(aw);A.get(aP).attr(q,T);}}}});ai.TreeNodeCheck=aL;var G="child",U="tree-node-task",P="unchecked",aQ=function(A){return A instanceof ai.TreeNodeCheck;},ak=K(i,s,G,P);var a4=ai.Component.create({NAME:U,EXTENDS:ai.TreeNodeCheck,prototype:{check:function(a6){var A=this;var a5=A.get(x);a6=a6||A;if(!A.isLeaf()){A.eachChildren(function(a7){if(aQ(a7)){a7.check(a6);}});}A.eachParent(function(a7){if(aQ(a7)&&!a7.isChecked()){a7.get(x).addClass(ak);}});a5.removeClass(ak);ai.TreeNodeTask.superclass.check.call(this,a6);},uncheck:function(a6){var A=this;var a5=A.get(x);a6=a6||A;if(!A.isLeaf()){A.eachChildren(function(a7){if(a7 instanceof ai.TreeNodeCheck){a7.uncheck(a6);}});}A.eachParent(function(a7){if(aQ(a7)&&!a7.isChecked()){a7.get(x).removeClass(ak);}});a5.removeClass(ak);ai.TreeNodeTask.superclass.uncheck.call(this,a6);}}});ai.TreeNodeTask=a4;var H="tree-node-radio",p=function(A){return A instanceof ai.TreeNodeRadio;},B=K(i,s,aE),Z=K(i,s,aE,q);var aV=ai.Component.create({NAME:H,EXTENDS:ai.TreeNodeTask,prototype:{renderUI:function(){var A=this;ai.TreeNodeRadio.superclass.renderUI.apply(A,arguments);A.get(x).addClass(B);},check:function(){var A=this;A._uncheckNodesRadio();ai.TreeNodeRadio.superclass.check.apply(this,arguments);
},_uiSetChecked:function(a5){var A=this;if(a5){A.get(x).addClass(Z);A.get(aP).attr(q,q);}else{A.get(x).removeClass(Z);A.get(aP).attr(q,T);}},_uncheckNodesRadio:function(a7){var A=this;var a6;if(a7){a6=a7.get(h);}else{var a5=A.get(ad);if(a5){a6=a5.get(h);}else{return;}}ai.Array.each(a6,function(a9,a8,ba){if(!a9.isLeaf()){A._uncheckNodesRadio(a9);}if(p(a9)){a9.uncheck();}});}}});ai.TreeNodeRadio=aV;ai.TreeNode.nodeTypes={radio:ai.TreeNodeRadio,task:ai.TreeNodeTask,check:ai.TreeNodeCheck,node:ai.TreeNode,io:ai.TreeNodeIO};},"@VERSION@",{skinnable:false,requires:["aui-tree-data","aui-io","json","querystring-stringify"]});AUI.add("aui-tree-view",function(ad){var V=ad.Lang,at=V.isBoolean,ay=V.isString,au=ad.UA,r="boundingBox",e="children",a="container",aa="content",t="contentBox",T=".",aq="file",C="hitarea",R="icon",b="invalid",ah="label",P="lastSelected",aw="leaf",q="node",X="ownerTree",H="root",U="selectOnToggle",s=" ",g="tree",D="tree-node",N="tree-view",f="type",z="view",az=function(){return Array.prototype.slice.call(arguments).join(s);},am=function(A){return(A instanceof ad.TreeNode);},B=ad.getClassName,ap=B(g,C),y=B(g,R),j=B(g,ah),w=B(g,q,aa),u=B(g,q,aa,b),m=B(g,H,a),ai=B(g,z,aa);var Q=ad.Component.create({NAME:N,ATTRS:{type:{value:aq,validator:ay},lastSelected:{value:null,validator:am},lazyLoad:{validator:at,value:true},io:{value:null},paginator:{value:null},selectOnToggle:{validator:at,value:false}},AUGMENTS:[ad.TreeData],prototype:{CONTENT_TEMPLATE:"<ul></ul>",initializer:function(){var A=this;var L=A.get(r);L.setData(N,A);},bindUI:function(){var A=this;A._delegateDOM();},renderUI:function(){var A=this;A._renderElements();},_createFromHTMLMarkup:function(L){var A=this;L.all("> li").each(function(aF){var aE=aF.one("> *").remove();var aD=aE.outerHTML();var aC=aF.one("> ul");var aG=new ad.TreeNode({boundingBox:aF,container:aC,label:aD,leaf:!aC,ownerTree:A});if(aC){aG.render();A._createFromHTMLMarkup(aC);}else{aG.render();}var aB=aF.get(d).get(d);var aH=aB.getData(D);if(!ad.instanceOf(aH,ad.TreeNode)){aH=aB.getData(N);}aH.appendChild(aG);});},_createNodeContainer:function(){var A=this;var L=A.get(t);A.set(a,L);return L;},_renderElements:function(){var A=this;var L=A.get(t);var aB=A.get(e);var aC=A.get(f);var aD=B(g,aC);L.addClass(ai);L.addClass(az(aD,m));if(!aB.length){A._createFromHTMLMarkup(L);}},_delegateDOM:function(){var A=this;var L=A.get(r);L.delegate("click",ad.bind(A._onClickNodeEl,A),T+w);L.delegate("dblclick",ad.bind(A._onClickHitArea,A),T+y);L.delegate("dblclick",ad.bind(A._onClickHitArea,A),T+j);L.delegate("mouseenter",ad.bind(A._onMouseEnterNodeEl,A),T+w);L.delegate("mouseleave",ad.bind(A._onMouseLeaveNodeEl,A),T+w);},_onClickNodeEl:function(L){var A=this;var aC=A.getNodeByChild(L.currentTarget);if(aC){if(L.target.test(T+ap)){aC.toggle();if(!A.get(U)){return;}}if(!aC.isSelected()){var aB=A.get(P);if(aB){aB.unselect();}aC.select();}}},_onMouseEnterNodeEl:function(L){var A=this;var aB=A.getNodeByChild(L.currentTarget);if(aB){aB.over();}},_onMouseLeaveNodeEl:function(L){var A=this;var aB=A.getNodeByChild(L.currentTarget);if(aB){aB.out();}},_onClickHitArea:function(L){var A=this;var aB=A.getNodeByChild(L.currentTarget);if(aB){aB.toggle();}}}});ad.TreeView=Q;var M=V.isNumber,ae="above",c="append",ag="below",ao="block",aj="body",ax="clearfix",ac="default",v="display",al="down",x="drag",n="draggable",Z="dragCursor",ar="dragNode",i="expanded",o="helper",av="insert",F="offsetHeight",d="parentNode",aA="scrollDelay",O="state",ak="tree-drag-drop",an="up",K=ad.DD.DDM,af=B(o,ax),k=B(R),ab=B(g,x,o),p=B(g,x,o,aa),J=B(g,x,o,ah),G=B(g,x,av,ae),Y=B(g,x,av,c),I=B(g,x,av,ag),l=B(g,x,O,c),S=B(g,x,O,av,ae),W=B(g,x,O,av,ag),E='<div class="'+ab+'">'+'<div class="'+[p,af].join(s)+'">'+'<span class="'+k+'"></span>'+'<span class="'+J+'"></span>'+"</div>"+"</div>";var h=ad.Component.create({NAME:ak,ATTRS:{helper:{value:null},scrollDelay:{value:100,validator:M}},EXTENDS:ad.TreeView,prototype:{direction:ag,dropAction:null,lastY:0,node:null,nodeContent:null,destructor:function(){var A=this;var L=A.get(o);if(L){L.remove(true);}if(A.ddDelegate){A.ddDelegate.destroy();}},bindUI:function(){var A=this;ad.TreeViewDD.superclass.bindUI.apply(this,arguments);A._bindDragDrop();},renderUI:function(){var A=this;ad.TreeViewDD.superclass.renderUI.apply(this,arguments);var L=ad.Node.create(E).hide();ad.one(aj).append(L);A.set(o,L);K.set(Z,ac);},_bindDragDrop:function(){var A=this,aB=A.get(r),L=null;A._createDragInitHandler=function(){A.ddDelegate=new ad.DD.Delegate({bubbleTargets:A,container:aB,invalid:T+u,nodes:T+w,target:true});var aC=A.ddDelegate.dd;aC.plug(ad.Plugin.DDProxy,{moveOnEnd:false,positionProxy:false,borderStyle:null}).plug(ad.Plugin.DDNodeScroll,{scrollDelay:A.get(aA),node:aB});aC.removeInvalid("a");if(L){L.detach();}};if(!au.touch){L=aB.on(["focus","mousedown","mousemove"],A._createDragInitHandler);}else{A._createDragInitHandler();}A.on("drag:align",A._onDragAlign);A.on("drag:start",A._onDragStart);A.on("drop:exit",A._onDropExit);A.after("drop:hit",A._afterDropHit);A.on("drop:hit",A._onDropHit);A.on("drop:over",A._onDropOver);},_appendState:function(L){var A=this;A.dropAction=c;A.get(o).addClass(l);L.addClass(Y);},_goingDownState:function(L){var A=this;A.dropAction=ag;A.get(o).addClass(W);L.addClass(I);},_goingUpState:function(L){var A=this;A.dropAction=ae;A.get(o).addClass(S);L.addClass(G);},_resetState:function(L){var A=this;var aB=A.get(o);aB.removeClass(l);aB.removeClass(S);aB.removeClass(W);if(L){L.removeClass(G);L.removeClass(Y);L.removeClass(I);}},_updateNodeState:function(A){var aK=this;var aG=A.drag;var aD=A.drop;var L=aD.get(q);var aJ=L.get(d);var aF=aG.get(q).get(d);var aC=aJ.getData(D);aK._resetState(aK.nodeContent);if(!aF.contains(aJ)){var aL=L.get(F)/3;var aB=L.getY();var aI=aB+aL;var aH=aB+aL*2;var aE=aG.mouseXY[1];if((aE>aB)&&(aE<aI)){aK._goingUpState(L);}else{if(aE>aH){aK._goingDownState(L);}else{if((aE>aI)&&(aE<aH)){if(aC&&!aC.isLeaf()){aK._appendState(L);}else{if(aK.direction===an){aK._goingUpState(L);
}else{aK._goingDownState(L);}}}}}}aK.nodeContent=L;},_afterDropHit:function(aD){var A=this;var aF=A.dropAction;var aE=aD.drag.get(q).get(d);var aB=aD.drop.get(q).get(d);var aG=aB.getData(D);var aC=aE.getData(D);var L=A.getEventOutputMap(A);L.tree.dropNode=aG;L.tree.dragNode=aC;if(aF===ae){aG.insertBefore(aC);A.bubbleEvent("dropInsert",L);}else{if(aF===ag){aG.insertAfter(aC);A.bubbleEvent("dropInsert",L);}else{if(aF===c){if(aG&&!aG.isLeaf()){aG.appendChild(aC);if(!aG.get(i)){aG.expand();}A.bubbleEvent("dropAppend",L);}}}}A._resetState(A.nodeContent);A.bubbleEvent("drop",L);A.dropAction=null;},_onDragAlign:function(aB){var A=this;var L=A.lastY;var aC=aB.target.lastXY[1];if(aC!==L){A.direction=(aC<L)?an:al;}A.lastY=aC;},_onDragStart:function(aE){var A=this;var aC=aE.target;var aG=aC.get(q).get(d);var aB=aG.getData(D);var aF=A.get(P);if(aF){aF.unselect();}aB.select();var aD=A.get(o);var L=aD.one(T+J);aD.setStyle(v,ao).show();L.html(aB.get(ah));aC.set(ar,aD);},_onDropOver:function(L){var A=this;A._updateNodeState(L);},_onDropHit:function(L){var A=L.drop.get(q).get(d);var aB=A.getData(D);if(!am(aB)){L.preventDefault();}},_onDropExit:function(){var A=this;A.dropAction=null;A._resetState(A.nodeContent);}}});ad.TreeViewDD=h;},"@VERSION@",{skinnable:true,requires:["aui-tree-node","dd-delegate","dd-proxy"]});AUI.add("aui-tree",function(a){},"@VERSION@",{use:["aui-tree-data","aui-tree-node","aui-tree-view"],skinnable:true});